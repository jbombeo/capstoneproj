import{u as L,r as c,d as P,j as e,H as S,L as b,b as i}from"./app-CHrjJv7C.js";import M from"./layout-m7Xg1wfj.js";import{M as A}from"./megaphone-BByCpEMB.js";import{P as z}from"./plus-BxX3rjFJ.js";import{c as j}from"./createLucideIcon-r-04NXR0.js";import{T as D}from"./trash-2-aV_8TVVR.js";import{X as U}from"./x-6MjSoi9b.js";import"./app-B1aFYef8.js";import"./menu-O2FPrM1Y.js";import"./chevron-down-Dus9dkDx.js";import"./log-out-yjwyG8Ps.js";import"./users-sN_XFzBw.js";import"./shield-DvdJl1qh.js";import"./calendar-C_pr95X7.js";import"./graduation-cap-Dd9e6YqM.js";import"./file-text-Dy-rehNU.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],I=j("Pencil",H);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],T=j("Upload",R);function te(){const{announcements:d}=L().props,[f,m]=c.useState(!1),[n,x]=c.useState(null),{data:u,setData:l,post:y,processing:r,reset:N,errors:s,clearErrors:p}=P({title:"",content:"",image:null}),v=()=>{p(),m(!0)},a=()=>{m(!1),x(null),N("title","content","image"),p()},w=t=>{l("image",t),n&&URL.revokeObjectURL(n),x(t?URL.createObjectURL(t):null)},k=t=>{t.preventDefault(),y("/sk/announcements",{forceFormData:!0,onSuccess:()=>{a(),i.reload({only:["announcements"]})}})},_=t=>{confirm("Delete this announcement?")&&i.delete(`/sk/announcements/${t}`,{onSuccess:()=>i.reload({only:["announcements"]})})},o=d?.data??[],g=d?.links??[],C=c.useMemo(()=>o.length===0,[o]);return e.jsxs(M,{children:[e.jsx(S,{title:"Announcements"}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(A,{className:"w-8 h-8 text-blue-600"}),"Announcements"]}),e.jsxs("button",{onClick:v,className:"px-5 py-3 bg-blue-600 text-white rounded-lg font-semibold flex items-center gap-2 hover:bg-blue-700 transition",children:[e.jsx(z,{className:"w-5 h-5"}),"New Announcement"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C?e.jsx("p",{className:"col-span-3 text-center text-gray-500",children:"No announcements yet."}):o.map(t=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-lg transition overflow-hidden",children:[t.image_path?e.jsx("img",{src:`/storage/${t.image_path}`,className:"w-full h-40 object-cover",alt:t.title}):e.jsx("div",{className:"w-full h-40 bg-gray-200 flex items-center justify-center text-gray-400 text-sm",children:"No Image"}),e.jsxs("div",{className:"p-5",children:[e.jsx("h2",{className:"font-bold text-gray-900 text-lg mb-2 line-clamp-2",children:t.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:t.excerpt??(t.content?t.content.substring(0,120)+"â€¦":"")}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[e.jsx("span",{children:t.created_at?new Date(t.created_at).toLocaleDateString():""}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{href:`/sk/announcements/${t.id}/edit`,className:"text-blue-600 hover:text-blue-800",children:e.jsx(I,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>_(t.id),className:"text-red-600 hover:text-red-800",children:e.jsx(D,{className:"w-5 h-5"})})]})]})]})]},t.id))}),!!g.length&&e.jsx("div",{className:"flex justify-center mt-10",children:e.jsx("div",{className:"flex gap-1 flex-wrap",children:g.map((t,h)=>t.url?e.jsx(b,{href:t.url,dangerouslySetInnerHTML:{__html:t.label},className:`px-3 py-2 rounded-lg border text-sm ${t.active?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-100"}`},h):e.jsx("span",{dangerouslySetInnerHTML:{__html:t.label},className:"px-3 py-2 rounded-lg border text-sm bg-gray-100 text-gray-400 border-gray-300"},h))})}),f&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:a}),e.jsxs("div",{className:"relative z-10 w-full max-w-2xl bg-white rounded-2xl shadow-2xl border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Create Announcement"}),e.jsx("button",{onClick:a,className:"p-2 rounded hover:bg-gray-100",children:e.jsx(U,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:u.title,onChange:t=>l("title",t.target.value),className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Announcement title"}),s.title&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:s.title})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Content ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("textarea",{value:u.content,onChange:t=>l("content",t.target.value),className:"w-full border rounded-lg px-3 py-2 h-32 resize-y focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Write the announcement details..."}),s.content&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:s.content})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image (optional)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 px-3 py-2 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:"Select image"}),e.jsx("input",{type:"file",accept:"image/png,image/jpeg",className:"hidden",onChange:t=>w(t.target.files?.[0]??null)})]}),n&&e.jsx("img",{src:n,alt:"Preview",className:"h-16 w-24 rounded-md object-cover border"})]}),s.image&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:s.image}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"JPG/PNG, up to 5MB. (Will be resized server-side)"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg border hover:bg-gray-50",disabled:r,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 disabled:opacity-60",disabled:r,children:r?"Saving...":"Publish"})]})]})]})]})]})}export{te as default};
