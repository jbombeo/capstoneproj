import{u as g,r,j as e,H as N,b as f}from"./app-BYDD7jqK.js";import{A as v}from"./app-layout-DwJpk70a.js";import{B as i}from"./button-Dr-gN8dc.js";import{C as y,a as w}from"./card-JB1H8R4P.js";/* empty css            */import"./app-sidebar-header-p_ZutQgq.js";import"./createLucideIcon-DdLpzc9k.js";import"./index-B2jg6ky-.js";import"./index-CoyH5QwD.js";import"./index-WOlHJoPy.js";import"./index-DwhOcVGB.js";import"./log-out-Be8tPfcd.js";import"./x-JC7lT9T1.js";import"./index-fql2wrXq.js";import"./settings-D0VBnQjg.js";import"./file-text-BVrqHHw0.js";function O(){const{residents:o,zones:b}=g().props,[l,p]=r.useState(""),[x,d]=r.useState(!1),[t,m]=r.useState(null),n=s=>`${s.first_name} ${s.middle_name??""} ${s.last_name}`.trim(),c=o.filter(s=>n(s).toLowerCase().includes(l.toLowerCase())),h=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),j=async s=>{if(confirm("Approve this resident?"))try{const a=await f.post(`/residentregistereds/${s}/approve`,{},{headers:{"X-CSRF-TOKEN":h||"",Accept:"application/json"}});a.data.generatedPassword?(console.log("âœ… Generated password:",a.data.generatedPassword),alert("Resident approved! Check console for the password.")):(console.log("Resident approved. No new password generated (user already exists)."),alert("Resident approved.")),window.location.reload()}catch(a){console.error("Failed to approve resident",a),alert("Failed to approve resident.")}},u=s=>{m(s),d(!0)};return e.jsxs(v,{breadcrumbs:[{title:"Residents",href:"#"}],children:[e.jsx(N,{title:"Residents"}),e.jsx("div",{className:"flex justify-between items-center mb-8 bg-green-600 text-white shadow-lg p-6",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Residents List"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("input",{placeholder:"Search by name...",value:l,onChange:s=>p(s.target.value),className:"max-w-sm mb-4 p-2 border rounded"}),e.jsx(y,{className:"shadow-md rounded-2xl overflow-x-auto",children:e.jsx(w,{className:"p-4",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse min-w-[900px]",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Full Name"}),e.jsx("th",{className:"px-4 py-2",children:"Email"}),e.jsx("th",{className:"px-4 py-2",children:"Age"}),e.jsx("th",{className:"px-4 py-2",children:"Zone"}),e.jsx("th",{className:"px-4 py-2",children:"Gender"}),e.jsx("th",{className:"px-4 py-2",children:"Civil Status"}),e.jsx("th",{className:"px-4 py-2",children:"Status"}),e.jsx("th",{className:"px-4 py-2",children:"Action"})]})}),e.jsx("tbody",{children:c.length>0?c.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:n(s)}),e.jsx("td",{className:"px-4 py-2",children:s.email}),e.jsx("td",{className:"px-4 py-2",children:s.age}),e.jsx("td",{className:"px-4 py-2",children:s.zone?.zone||"N/A"}),e.jsx("td",{className:"px-4 py-2",children:s.gender||"Unknown"}),e.jsx("td",{className:"px-4 py-2",children:s.civil_status||"Unknown"}),e.jsx("td",{className:"px-4 py-2",children:s.status||"N/A"}),e.jsxs("td",{className:"px-4 py-2 space-x-2",children:[s.status==="pending"&&e.jsx(i,{size:"sm",variant:"outline",onClick:()=>j(s.id),children:"Approve"}),e.jsx(i,{size:"sm",variant:"secondary",onClick:()=>u(s),children:"View"})]})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-4 text-gray-500",children:"No residents found"})})})]})})})]}),x&&t&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[t.image&&e.jsx("img",{src:`/storage/${t.image}`,alt:"Resident",className:"w-24 h-24 rounded-full mb-4"}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Resident Details"}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",n(t)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Age:"})," ",t.age]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Gender:"})," ",t.gender]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Civil Status:"})," ",t.civil_status]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Zone:"})," ",t.zone?.zone||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",t.status]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(i,{onClick:()=>d(!1),children:"Close"})})]})})]})}export{O as default};
