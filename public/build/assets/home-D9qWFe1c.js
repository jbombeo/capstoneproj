import{r as a,d as T,u as z,j as e,H as A,L as j}from"./app-Dp8eBqIU.js";import{X as O}from"./x-CosRwlaN.js";import{H as U,L as D}from"./log-out-BJ7NbZjK.js";import{U as F}from"./user-DtLczq3B.js";import{S as R}from"./shield-check-D7FC03LQ.js";import{F as $}from"./file-text-CLxDmEOh.js";import{C as q}from"./clipboard-list-Czd-FXhb.js";import{M as _}from"./message-square-DVXoYDdc.js";import{S as W}from"./settings-dOOLNFQc.js";import{B as V}from"./bell-DPRTIDta.js";import{M as X}from"./menu-B9O67PPD.js";import{C as o}from"./calendar-Cu_eH_gM.js";import{H as w,T as G}from"./trophy-Bzz9sMAp.js";import{M as I}from"./megaphone-BvZ3tSzw.js";import"./app-BLU9PWWC.js";import"./createLucideIcon-BgI95zP9.js";const J=({className:i="w-6 h-6"})=>e.jsxs("svg",{className:i,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"21"}),e.jsx("path",{d:"M8 6H4l-2 6 2 3h4l-2-3z"}),e.jsx("path",{d:"M20 6h-4l2 6-2 3h4l2-3z"}),e.jsx("circle",{cx:"12",cy:"3",r:"1"})]});function he({activities:i=[]}){const[x,r]=a.useState(!1),[n,c]=a.useState("upcoming"),[y,m]=a.useState(!1),{post:d}=T(),{notifications:h,notifications_count:l}=z().props,[K,N]=a.useState({}),[v,p]=a.useState({}),[k,f]=a.useState(l>0);a.useEffect(()=>{f(l>0)},[l]);const C=()=>d("/logout"),S=[{name:"Home",icon:U,href:"/resident/home"},{name:"Profile",icon:F,href:"/resident/profile"},{name:"Barangay Official",icon:R,href:"/resident/officials"},{name:"Request Document",icon:$,href:"/resident/document-requests"},{name:"Blotter",icon:q,href:"/resident/blotters"},{name:"Suggest",icon:_,href:"/resident/feedback"},{name:"Settings",icon:W,href:"/resident/settings"}],L=s=>{const t=s.toLowerCase();return t.includes("patrol")||t.includes("training")?o:t.includes("meeting")||t.includes("community")?I:t.includes("sports")||t.includes("fest")?G:t.includes("health")||t.includes("seminar")?w:o},u=new Date().toISOString().split("T")[0],H=i.filter(s=>s.dateofactivity>=u),B=i.filter(s=>s.dateofactivity<u),g=n==="upcoming"?H:B,M=s=>{N(t=>({...t,[s]:(t[s]??0)+1})),p(t=>({...t,[s]:!0})),setTimeout(()=>{p(t=>({...t,[s]:!1}))},800),d(`/activities/${s}/like`)};a.useEffect(()=>{const s=t=>{t.target.closest(".notification-area")||m(!1)};return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]);const P=s=>{s.stopPropagation(),m(t=>!t),f(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:"Resident Home"}),e.jsxs("div",{className:"min-h-screen flex bg-gray-100",children:[e.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 w-72 sm:w-80 bg-gradient-to-b from-blue-900 to-blue-800 shadow-2xl flex flex-col transition-transform duration-300 transform ${x?"translate-x-0":"-translate-x-full lg:translate-x-0"} lg:static lg:translate-x-0`,children:[e.jsxs("div",{className:"px-6 py-6 sm:px-8 sm:py-8 border-b border-blue-700 flex flex-col items-center justify-center relative",children:[e.jsx("button",{className:"lg:hidden absolute top-4 right-4 text-white",onClick:()=>r(!1),children:e.jsx(O,{className:"w-6 h-6"})}),e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mb-3 flex items-center justify-center",children:e.jsx("img",{src:"/images/logo.png",alt:"Barangay Logo",className:"w-full h-full object-contain rounded-full"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white text-center",children:"Barangay Portal"})]}),e.jsx("nav",{className:"flex-1 px-4 sm:px-6 py-4 space-y-1 overflow-y-auto",children:S.map(s=>e.jsxs(j,{href:s.href,className:"flex items-center px-3 py-3 sm:px-4 sm:py-3 rounded-lg hover:bg-green-700/50 text-white transition group text-sm sm:text-base",children:[e.jsx(s.icon,{className:"w-5 h-5 mr-3 sm:mr-4"}),e.jsx("span",{className:"font-medium",children:s.name})]},s.name))}),e.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-6 border-t border-blue-700",children:e.jsxs("button",{onClick:C,className:"w-full flex items-center justify-center px-3 py-3 sm:px-4 sm:py-3 rounded-lg bg-blue-700/50 hover:bg-red-600 text-white text-sm sm:text-base transition",children:[e.jsx(D,{className:"w-5 h-5 mr-2 sm:mr-3"}),e.jsx("span",{className:"font-medium",children:"Logout"})]})})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>r(!1)}),e.jsxs("main",{className:"flex-1 min-h-screen flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 px-4 py-4 sm:px-6 sm:py-6 lg:px-10 lg:py-10 text-white shadow-lg",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col gap-4 sm:gap-6 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 md:gap-6",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full border-2 sm:border-4 border-white/30 flex items-center justify-center bg-white/10",children:e.jsx(J,{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 lg:w-10 lg:h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-3xl lg:text-4xl font-bold leading-tight",children:"Welcome to the"}),e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-3xl lg:text-4xl font-bold leading-tight",children:"Barangay Portal"}),e.jsx("p",{className:"mt-2 sm:mt-3 text-sm sm:text-base lg:text-lg text-blue-100",children:"Check the latest activities and events in your barangay"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 sm:gap-4",children:[e.jsxs("div",{className:"notification-area relative",children:[e.jsxs("button",{onClick:P,className:"relative p-2 sm:p-2.5 rounded-lg bg-blue-700/50 hover:bg-blue-700 transition",children:[e.jsx(V,{className:"w-6 h-6 sm:w-7 sm:h-7 text-white"}),k&&l>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-[10px] sm:text-xs rounded-full w-4 h-4 sm:w-5 sm:h-5 flex items-center justify-center",children:l>9?"9+":l})]}),y&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 sm:w-72 bg-white shadow-xl rounded-xl p-3 sm:p-4 text-gray-800 z-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-bold text-sm sm:text-base",children:"Notifications"}),e.jsx("button",{className:"text-[11px] text-blue-600 hover:underline",onClick:()=>m(!1),children:"Close"})]}),h.length===0?e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"No notifications available."}):e.jsx("ul",{className:"space-y-2 max-h-64 overflow-y-auto text-xs sm:text-sm",children:h.map(s=>e.jsxs("li",{className:"p-2 sm:p-3 bg-gray-100 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-semibold",children:s.title}),e.jsx("span",{className:"text-[10px] text-gray-500",children:s.type})]}),e.jsx("div",{className:"text-gray-700",children:s.message}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-[10px] sm:text-[11px] text-gray-500",children:s.time}),e.jsx(j,{href:s.link,className:"text-[10px] sm:text-[11px] text-blue-600 hover:underline",children:"View"})]})]},s.id))})]})]}),e.jsx("button",{className:"lg:hidden p-2 rounded-lg bg-blue-700/50 hover:bg-blue-700 text-white",onClick:()=>r(!0),children:e.jsx(X,{className:"w-6 h-6"})})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto w-full px-4 py-6 sm:px-6 sm:py-8 lg:px-10 lg:py-10 flex-1",children:[e.jsx("div",{className:"mb-6 sm:mb-8 flex justify-center sm:justify-start",children:e.jsxs("div",{className:"inline-flex bg-gray-200 rounded-xl p-1 shadow-sm w-full max-w-xs sm:max-w-sm md:max-w-md",children:[e.jsx("button",{className:`flex-1 px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold text-sm sm:text-base transition-all ${n==="upcoming"?"bg-blue-600 text-white shadow-md":"bg-transparent text-gray-700 hover:text-gray-900"}`,onClick:()=>c("upcoming"),children:"Upcoming"}),e.jsx("button",{className:`flex-1 px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold text-sm sm:text-base transition-all ${n==="past"?"bg-blue-600 text-white shadow-md":"bg-transparent text-gray-700 hover:text-gray-900"}`,onClick:()=>c("past"),children:"Past"})]})}),e.jsx("section",{className:"space-y-4 sm:space-y-6",children:g.length===0?e.jsxs("div",{className:"text-center py-12 sm:py-16 px-4",children:[e.jsx(o,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-300 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-500 text-base sm:text-lg",children:["No ",n," activities or events available."]})]}):g.map(s=>{const t=L(s.activity),E=v[s.id]??!1;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-md sm:shadow-lg hover:shadow-xl transition-shadow duration-300 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-100",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx(t,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"ml-3 sm:ml-4 flex-1",children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold text-gray-900",children:s.activity}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:s.dateofactivity})]})]}),e.jsx("div",{className:"px-3 sm:px-4 py-2 sm:py-3 text-gray-700 text-sm whitespace-pre-line",children:s.description}),s.photos?.length?e.jsx("div",{className:"px-3 sm:px-4 pb-3 sm:pb-4 pt-2 sm:pt-3 flex flex-wrap gap-2",children:s.photos?.map(b=>e.jsxs("div",{className:"relative w-full xs:w-1/2 sm:w-1/2 md:w-1/3 lg:w-1/4 h-40 sm:h-48 overflow-hidden rounded-lg",children:[e.jsx("img",{src:b.url,alt:"Activity",className:"w-full h-full object-cover cursor-pointer",onDoubleClick:()=>M(s.id)}),E&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx(w,{className:"w-12 h-12 sm:w-16 sm:h-16 text-white drop-shadow-lg animate-ping"})})]},b.id))}):null,e.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-4 py-2 border-t border-gray-100 text-xs sm:text-sm text-gray-500",children:[e.jsx("span",{}),e.jsx("span",{children:"Barangay Portal"})]})]},s.id)})})]})]})]})]})}export{he as default};
