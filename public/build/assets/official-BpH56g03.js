import{u as E,r as c,j as e,H as P,a as m}from"./app-pOO083-e.js";import{A as T}from"./app-layout-Dc3hkrhW.js";import{I as n}from"./input-BNUIgu_-.js";import{B as d}from"./button-C04eTuKF.js";import{C as B,a as L}from"./card-7timp76z.js";import{D as g,a as I,b as v,c as f,d as y,f as N}from"./dialog-C6812wCE.js";import{L as r}from"./label-C_a1iMIs.js";/* empty css            */import"./app-sidebar-header-COL4hiO2.js";import"./createLucideIcon-DoMVaiJs.js";import"./index-D3C--ds9.js";import"./index-hFgQNbVr.js";import"./index-BvNCmLem.js";import"./index-DwhOcVGB.js";import"./log-out-02q7rZj1.js";import"./x-C-J8wUVu.js";import"./index-D0bkFEMS.js";import"./settings-BYB2_0H7.js";import"./file-text-pZ84JjBm.js";function se(){const{officials:b}=E().props,[p,C]=c.useState(""),[_,x]=c.useState(!1),[w,o]=c.useState(!1),[h,u]=c.useState(null),[a,t]=c.useState({position:"",complete_name:"",contact:"",address:"",term_start:"",term_end:"",status:"Active",image:null}),j=b.filter(s=>s.complete_name.toLowerCase().includes(p.toLowerCase())),O=()=>{const s=new FormData;Object.entries(a).forEach(([l,i])=>{i!==null&&s.append(l,i)}),m.post("/officials",s,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{t({position:"",complete_name:"",contact:"",address:"",term_start:"",term_end:"",status:"Active",image:null}),x(!1),alert("Official added successfully!")}})},S=s=>{u(s),t({position:s.position,complete_name:s.complete_name,contact:s.contact,address:s.address,term_start:s.term_start,term_end:s.term_end,status:s.status,image:null}),o(!0)},A=()=>{if(!h)return;const s=new FormData;Object.entries(a).forEach(([l,i])=>{i!==null&&s.append(l,i)}),m.post(`/officials/${h.id}?_method=PUT`,s,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{o(!1),u(null),alert("Official updated successfully!")}})},D=s=>{confirm("Are you sure you want to delete this official?")&&m.delete(`/officials/${s}`,{onSuccess:()=>{alert("Official deleted successfully!")}})};return e.jsxs(T,{breadcrumbs:[{title:"Officials",href:"#"}],children:[e.jsx(P,{title:"Officials"}),e.jsx("div",{className:"flex justify-between items-center mb-8 bg-green-600 text-white shadow-lg p-6",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Officials List"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(n,{placeholder:"Search by name...",value:p,onChange:s=>C(s.target.value),className:"max-w-sm"}),e.jsxs(g,{open:_,onOpenChange:x,children:[e.jsx(I,{asChild:!0,children:e.jsx(d,{className:"bg-blue-600 text-white hover:bg-blue-700",children:"+ Add Official"})}),e.jsxs(v,{className:"sm:max-w-md",children:[e.jsx(f,{children:e.jsx(y,{children:"Add New Official"})}),e.jsxs("div",{className:"space-y-4 mt-2",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Position"}),e.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:a.position,onChange:s=>t({...a,position:s.target.value}),children:[e.jsx("option",{value:"",children:"Select Position"}),e.jsx("option",{value:"Punong Barangay",children:"Punong Barangay"}),e.jsx("option",{value:"Barangay Kagawad",children:"Barangay Kagawad"}),e.jsx("option",{value:"Secretary",children:"Secretary"})]})]}),["complete_name","contact","address"].map(s=>e.jsxs("div",{children:[e.jsx(r,{children:s.replace("_"," ").toUpperCase()}),e.jsx(n,{value:a[s],onChange:l=>t({...a,[s]:l.target.value})})]},s)),e.jsxs("div",{children:[e.jsx(r,{children:"Term Start"}),e.jsx(n,{type:"date",value:a.term_start,onChange:s=>t({...a,term_start:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Term End"}),e.jsx(n,{type:"date",value:a.term_end,onChange:s=>t({...a,term_end:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:a.status,onChange:s=>t({...a,status:s.target.value}),children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Leave",children:"Leave"})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{s.target.files&&t({...a,image:s.target.files[0]})}})]})]}),e.jsx(N,{className:"mt-4",children:e.jsx(d,{className:"w-full bg-blue-600 text-white hover:bg-blue-700",onClick:O,children:"Add Official"})})]})]})]}),e.jsx(B,{className:"shadow-md rounded-2xl overflow-x-auto",children:e.jsx(L,{className:"p-4",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Image"}),e.jsx("th",{className:"px-4 py-2",children:"Position"}),e.jsx("th",{className:"px-4 py-2",children:"Name"}),e.jsx("th",{className:"px-4 py-2",children:"Contact"}),e.jsx("th",{className:"px-4 py-2",children:"Address"}),e.jsx("th",{className:"px-4 py-2",children:"Term Start"}),e.jsx("th",{className:"px-4 py-2",children:"Term End"}),e.jsx("th",{className:"px-4 py-2",children:"Status"}),e.jsx("th",{className:"px-4 py-2",children:"Action"})]})}),e.jsx("tbody",{children:j.length>0?j.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-4 py-2",children:s.image?e.jsx("img",{src:`/storage/${s.image}`,alt:s.complete_name,className:"w-12 h-12 rounded-full object-cover"}):"No image"}),e.jsx("td",{className:"px-4 py-2",children:s.position}),e.jsx("td",{className:"px-4 py-2",children:s.complete_name}),e.jsx("td",{className:"px-4 py-2",children:s.contact}),e.jsx("td",{className:"px-4 py-2",children:s.address}),e.jsx("td",{className:"px-4 py-2",children:s.term_start}),e.jsx("td",{className:"px-4 py-2",children:s.term_end}),e.jsx("td",{className:"px-4 py-2",children:s.status}),e.jsxs("td",{className:"px-4 py-2 space-x-2",children:[e.jsx(d,{size:"sm",variant:"outline",onClick:()=>S(s),children:"Edit"}),e.jsx(d,{size:"sm",variant:"destructive",onClick:()=>D(s.id),children:"Delete"})]})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-center py-4 text-gray-500",children:"No officials found"})})})]})})})]}),e.jsx(g,{open:w,onOpenChange:o,children:e.jsxs(v,{className:"sm:max-w-md",children:[e.jsx(f,{children:e.jsx(y,{children:"Edit Official"})}),e.jsxs("div",{className:"space-y-4 mt-2",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Position"}),e.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:a.position,onChange:s=>t({...a,position:s.target.value}),children:[e.jsx("option",{value:"",children:"Select Position"}),e.jsx("option",{value:"Punong Barangay",children:"Punong Barangay"}),e.jsx("option",{value:"Barangay Kagawad",children:"Barangay Kagawad"}),e.jsx("option",{value:"Secretary",children:"Secretary"})]})]}),["complete_name","contact","address"].map(s=>e.jsxs("div",{children:[e.jsx(r,{children:s.replace("_"," ").toUpperCase()}),e.jsx(n,{value:a[s],onChange:l=>t({...a,[s]:l.target.value})})]},s)),e.jsxs("div",{children:[e.jsx(r,{children:"Term Start"}),e.jsx(n,{type:"date",value:a.term_start,onChange:s=>t({...a,term_start:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Term End"}),e.jsx(n,{type:"date",value:a.term_end,onChange:s=>t({...a,term_end:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:a.status,onChange:s=>t({...a,status:s.target.value}),children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Leave",children:"Leave"})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{s.target.files&&t({...a,image:s.target.files[0]})}})]})]}),e.jsx(N,{className:"mt-4",children:e.jsx(d,{className:"w-full bg-blue-600 text-white hover:bg-blue-700",onClick:A,children:"Update Official"})})]})})]})}export{se as default};
