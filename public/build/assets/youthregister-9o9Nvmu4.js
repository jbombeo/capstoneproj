import{r as n,j as e,H as R,b as y}from"./app-_wj1wiEc.js";import{F as A,z as C}from"./index-9aUBe4GY.js";import{I as j}from"./input-error-D_zbtnVJ.js";import{B as u}from"./button-HZSfloRH.js";import{I as v}from"./input-CaSbsQoB.js";import{L as h}from"./label-DuuBaXdl.js";import{D as O,a as M,b as Y,c as B,d as T}from"./dialog-BHDE3h_S.js";import{L as q}from"./loader-circle-le3MHRk3.js";import"./app-DgE45SX0.js";import"./utils-csTuJWuA.js";import"./clsx-B-dksMZM.js";import"./index-Dl6FYVux.js";import"./index-CObx42Nt.js";import"./index-DVkLe2dy.js";import"./index-DlLLoGOC.js";import"./x-cF_pgnf8.js";import"./createLucideIcon-Dk2zpREm.js";function re(){const w={email:"",first_name:"",middle_name:"",last_name:"",birth_date:"",birth_place:"",age:"",contact_number:"",gender:"",skills:[],image:null},[a,d]=n.useState(w),[x,p]=n.useState(""),[c,b]=n.useState(!1),[r,N]=n.useState({}),[_,S]=n.useState(null),[k,f]=n.useState(!1),i=n.useMemo(()=>{if(!a.birth_date)return"";const t=new Date(a.birth_date),s=new Date;let l=s.getFullYear()-t.getFullYear();const g=s.getMonth()-t.getMonth();return(g<0||g===0&&s.getDate()<t.getDate())&&l--,l},[a.birth_date]);n.useEffect(()=>{i&&a.age!==i.toString()&&d(t=>({...t,age:i.toString()}))},[i]);const o=(t,s)=>{d(l=>({...l,[t]:s})),t==="image"&&s&&S(URL.createObjectURL(s))},D=()=>{const t=x.trim();t&&!a.skills.includes(t)&&d(s=>({...s,skills:[...s.skills,t]})),p("")},F=t=>{d(s=>({...s,skills:s.skills.filter(l=>l!==t)}))},E=()=>{const t={};return["email","first_name","last_name","birth_date","gender"].forEach(l=>{a[l]||(t[l]="This field is required")}),a.image||(t.image="2x2 photo is required."),Number(i)>21&&(t.age="Age must not be more than 21 years old."),N(t),Object.keys(t).length===0},P=t=>{if(t.preventDefault(),!E())return;b(!0),N({});const s=new FormData;Object.entries(a).forEach(([l,g])=>{l==="skills"?g.forEach(L=>s.append("skills[]",L)):l==="age"?s.append("age",i?i.toString():"0"):g!==null&&s.append(l,g)}),y.post("/youth/register",s,{forceFormData:!0,onSuccess:()=>{C.success("Registration submitted! Please wait for SK approval."),y.visit("/login")},onError:l=>{N(l),C.error("Failed to register. Please check your input.")},onFinish:()=>b(!1)})},I=()=>{f(!1),y.visit("/")};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(R,{title:"Youth Registration"}),e.jsx(A,{position:"top-right",toastOptions:{duration:4e3}}),e.jsxs("header",{className:"fixed top-0 left-0 w-full z-50 bg-cover bg-center shadow-lg",style:{backgroundImage:"url('/images/iponan2.jpg')"},children:[e.jsx("div",{className:"absolute inset-0 bg-blue-900 bg-opacity-70"}),e.jsxs("div",{className:"relative max-w-5xl mx-auto flex items-center justify-between px-6 py-3 md:py-6",children:[e.jsx("img",{src:"/images/logo.png",alt:"Barangay Logo",className:"h-12 w-12 md:h-20 md:w-20 rounded-full border-2 border-white shadow"}),e.jsxs("div",{className:"flex flex-col items-center justify-center text-center text-white space-y-1",children:[e.jsx("img",{src:"/images/sk.png",alt:"SK Logo",className:"h-12 w-12 md:h-16 md:w-16 mb-1 rounded-full border-2 border-white shadow-md"}),e.jsx("h1",{className:"text-lg md:text-2xl font-bold uppercase",children:"Sangguniang Kabataan Youth Registration"}),e.jsx("p",{className:"text-xs md:text-sm opacity-90 italic",children:"Official SK Membership Portal"})]}),e.jsx("img",{src:"/images/cdologo.png",alt:"Gov Seal",className:"h-17 w-12 md:h-20 md:w-20 rounded-full border-white shadow"})]})]}),e.jsx("main",{className:"max-w-2xl mx-auto bg-white shadow-lg rounded-2xl border border-gray-200 p-8 pt-40 md:pt-56 space-y-8",children:e.jsxs("form",{onSubmit:P,encType:"multipart/form-data",className:"space-y-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-blue-900 border-b pb-2",children:"Youth Information"}),e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsx(m,{label:"Email Address *",name:"email",type:"email",value:a.email,onChange:o,error:r.email}),e.jsx(m,{label:"First Name *",name:"first_name",value:a.first_name,onChange:o,error:r.first_name}),e.jsx(m,{label:"Middle Name",name:"middle_name",value:a.middle_name,onChange:o,error:r.middle_name}),e.jsx(m,{label:"Last Name *",name:"last_name",value:a.last_name,onChange:o,error:r.last_name}),e.jsx(m,{label:"Birth Date *",name:"birth_date",type:"date",value:a.birth_date,onChange:o,error:r.birth_date}),e.jsx(m,{label:"Birth Place",name:"birth_place",value:a.birth_place,onChange:o,error:r.birth_place}),e.jsx(m,{label:"Contact Number",name:"contact_number",value:a.contact_number,onChange:o,error:r.contact_number}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{className:"font-medium",children:"Gender *"}),e.jsxs("select",{value:a.gender,onChange:t=>o("gender",t.target.value),className:"border rounded-lg p-2 bg-white",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]}),r.gender&&e.jsx(j,{message:r.gender})]}),i&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{className:"font-medium",children:"Age"}),e.jsx("div",{className:"p-2 border rounded bg-gray-100 text-gray-700",children:i}),r.age&&e.jsx(j,{message:r.age})]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx(h,{className:"font-medium",children:"Skills (optional)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{type:"text",value:x,placeholder:"Type a skill and press Add",onChange:t=>p(t.target.value)}),e.jsx(u,{type:"button",onClick:D,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.skills.map((t,s)=>e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[t,e.jsx("button",{type:"button",onClick:()=>F(t),className:"text-blue-600 hover:text-red-600 font-bold",children:"×"})]},s))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"image",className:"font-medium",children:"Upload 2x2 Photo *"}),e.jsx(v,{id:"image",type:"file",accept:"image/*",onChange:t=>o("image",t.target.files?.[0]||null),className:"border rounded-lg p-2 bg-white"}),e.jsx(j,{message:r.image}),_&&e.jsx("img",{src:_,alt:"Preview",className:"w-28 h-28 mt-3 object-cover rounded-full border shadow"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-6",children:[e.jsxs(u,{type:"submit",disabled:c,className:"flex items-center justify-center w-full sm:w-auto py-3 px-8 text-white text-lg font-semibold rounded-lg shadow-md bg-blue-900 hover:bg-blue-800 transition-all",children:[c&&e.jsx(q,{className:"h-5 w-5 mr-2 animate-spin"}),c?"Submitting…":"Register"]}),e.jsx(u,{type:"button",onClick:()=>f(!0),className:"w-full sm:w-auto py-3 px-8 text-lg font-semibold rounded-lg shadow-md bg-red-600 hover:bg-red-700 text-white transition-all",children:"Cancel"})]})]})}),e.jsx(O,{open:k,onOpenChange:f,children:e.jsxs(M,{className:"sm:max-w-md",children:[e.jsxs(Y,{children:[e.jsx(B,{className:"text-lg font-semibold text-gray-800",children:"Cancel Registration"}),e.jsx(T,{className:"text-sm text-gray-600",children:"Are you sure you want to cancel? All entered data will be lost."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-6 justify-center",children:[e.jsx(u,{type:"button",onClick:()=>f(!1),className:"w-full sm:w-auto px-8 py-2.5 text-sm font-semibold border border-gray-300 text-gray-700 bg-white hover:bg-gray-100",children:"No, Stay Here"}),e.jsx(u,{type:"button",onClick:I,className:"w-full sm:w-auto px-8 py-2.5 text-sm font-semibold bg-red-600 hover:bg-red-700 text-white",children:"Yes, Cancel"})]})]})})]})}function m({label:w,name:a,type:d="text",value:x,onChange:p,error:c}){return e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:a,className:"font-medium",children:w}),e.jsx(v,{id:a,name:a,type:d,value:x,onChange:b=>p(a,b.target.value),className:"rounded-lg border-gray-300"}),c&&e.jsx(j,{message:c})]})}export{re as default};
