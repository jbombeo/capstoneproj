import{u as N,r as n,d as _,j as e,L as y}from"./app-Dp8eBqIU.js";import{M as A}from"./menu-B9O67PPD.js";import{B as Y}from"./bell-DPRTIDta.js";import{C as K}from"./chevron-down-BkXCBmR0.js";import{L as M,H as U}from"./log-out-BJ7NbZjK.js";import{C as v}from"./calendar-Cu_eH_gM.js";import{G as J}from"./graduation-cap-UwHRYR2I.js";import{S as P}from"./settings-dOOLNFQc.js";import"./app-BLU9PWWC.js";import"./createLucideIcon-BgI95zP9.js";function Q({children:S}){const{user:t={name:"",email:"",role:"",avatar_url:null},notifications:r=[]}=N().props,[u,m]=n.useState(!1),[f,g]=n.useState(!1),[k,x]=n.useState(!1),[b,o]=n.useState([]),d=n.useRef(null),h=n.useRef(null),C=_({}),O=()=>C.post("/logout"),I=s=>N().url.startsWith(s),E=[{label:"Home",icon:U,href:"/youth/home"},{label:"SK Official",icon:v,href:"/youth/official"},{label:"Projects",icon:v,href:"/youth/projects"},{label:"Scholarships",icon:J,href:"/youth/scholarships"},{label:"Settings",icon:P,href:"/youth/settings"}],c="read_notifications";n.useEffect(()=>{try{const s=typeof window<"u"?localStorage.getItem(c)??"[]":"[]",a=JSON.parse(s),l=r.filter(i=>!a.includes(i.id)).map(i=>i.id);o(l)}catch{o(r.map(s=>s.id))}},[r]);const w=b.length,j=s=>{try{const a=typeof window<"u"?localStorage.getItem(c)??"[]":"[]",l=JSON.parse(a),i=Array.from(new Set([...l,s]));localStorage.setItem(c,JSON.stringify(i)),o(p=>p.filter(L=>L!==s))}catch{o(a=>a.filter(l=>l!==s))}x(!1)},R=()=>{try{const s=typeof window<"u"?localStorage.getItem(c)??"[]":"[]",a=JSON.parse(s),l=r.map(p=>p.id),i=Array.from(new Set([...a,...l]));localStorage.setItem(c,JSON.stringify(i)),o([])}catch{o([])}};return n.useEffect(()=>{const s=a=>{const l=a.target;d.current&&!d.current.contains(l)&&g(!1),h.current&&!h.current.contains(l)&&x(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-100",children:[e.jsx("nav",{className:"bg-gradient-to-r from-blue-700 to-blue-800 text-white w-full shadow-md z-50 fixed top-0 left-0",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-6 py-2 sm:py-3 flex items-center justify-between gap-2",children:[e.jsx("button",{onClick:()=>m(!0),className:"p-2 rounded-lg bg-blue-900/30 lg:hidden flex-shrink-0",children:e.jsx(A,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1 justify-center lg:justify-start",children:[e.jsx("img",{src:"/images/sk.png",className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full border-2 border-white shadow-sm flex-shrink-0"}),e.jsxs("div",{className:"hidden xs:block min-w-0",children:[e.jsx("p",{className:"font-bold text-sm sm:text-lg leading-tight truncate",children:"SK Youth Portal"}),e.jsx("p",{className:"text-[10px] sm:text-xs opacity-90 truncate",children:"Sangguniang Kabataan System"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-shrink-0",children:[e.jsxs("div",{className:"relative",ref:h,children:[e.jsxs("button",{onClick:()=>x(s=>!s),className:"p-2 rounded-full bg-blue-900/30 hover:bg-blue-900/40 transition relative",children:[e.jsx(Y,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"}),w>0&&e.jsx("span",{className:`\r
                      absolute -top-1 -right-1\r
                      min-w-[18px] h-[18px]\r
                      px-1 rounded-full bg-red-500\r
                      text-[10px] text-white font-bold\r
                      flex items-center justify-center\r
                    `,children:w})]}),k&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 sm:w-72 max-w-[90vw] bg-white text-gray-700 shadow-xl rounded-xl border overflow-hidden z-50",children:[e.jsxs("div",{className:"px-4 py-3 border-b bg-gray-50 flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[r.length," ",r.length===1?"item":"items"]}),r.length>0&&e.jsx("button",{type:"button",onClick:R,className:"text-[11px] text-blue-600 hover:underline",children:"Mark all as read"})]})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:r.length===0?e.jsx("div",{className:"px-4 py-4 text-sm text-gray-600",children:"No notifications."}):e.jsx("ul",{className:"divide-y divide-gray-100",children:r.map(s=>{const a=b.includes(s.id);return s.link?e.jsx("li",{children:e.jsxs(y,{href:s.link,onClick:()=>j(s.id),className:`flex flex-col px-4 py-3 hover:bg-gray-50 transition ${a?"bg-blue-50/60":""}`,children:[e.jsx("span",{className:"text-xs uppercase font-semibold text-blue-600",children:s.type}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:s.title}),s.message&&e.jsx("span",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:s.message}),s.time&&e.jsx("span",{className:"text-[10px] text-gray-400 mt-1",children:s.time})]})},s.id):e.jsx("li",{children:e.jsxs("div",{className:`flex flex-col px-4 py-3 hover:bg-gray-50 transition ${a?"bg-blue-50/60":""}`,onClick:()=>j(s.id),children:[e.jsx("span",{className:"text-xs uppercase font-semibold text-blue-600",children:s.type}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:s.title}),s.message&&e.jsx("span",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:s.message}),s.time&&e.jsx("span",{className:"text-[10px] text-gray-400 mt-1",children:s.time})]})},s.id)})})})]})]}),e.jsxs("div",{className:"relative",ref:d,children:[e.jsxs("button",{onClick:()=>g(!f),className:"flex items-center gap-2 sm:gap-3 bg-blue-900/30 px-2 sm:px-4 py-1.5 sm:py-2 rounded-full hover:bg-blue-900/40 transition",children:[t?.avatar_url?e.jsx("img",{src:t.avatar_url,alt:"User Avatar",className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover border-2 border-white shadow"}):e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-full bg-white/20 font-bold text-white shadow text-xs sm:text-sm",children:t?.name?t.name.split(" ").map(s=>s[0]).join(""):"U"}),e.jsxs("div",{className:"hidden sm:flex flex-col text-left leading-tight max-w-[140px]",children:[e.jsx("span",{className:"text-xs sm:text-sm font-bold text-white truncate",children:t?.name}),e.jsx("span",{className:"text-[10px] sm:text-xs text-white/70 truncate",children:t?.email})]}),e.jsx(K,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white/90 hidden xs:block"})]}),f&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 max-w-[90vw] bg-white text-gray-700 shadow-xl rounded-xl border overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-4 border-b bg-gray-50 flex items-center gap-3",children:[t?.avatar_url?e.jsx("img",{src:t.avatar_url,className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full object-cover border"}):e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm sm:text-base",children:t?.name?t.name.split(" ").map(s=>s[0]).join(""):"U"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900 truncate",children:t?.name}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:t?.email}),e.jsx("p",{className:"text-[10px] text-blue-700 font-semibold uppercase mt-1 truncate",children:t?.role})]})]}),e.jsxs("button",{onClick:O,className:"flex gap-2 px-4 py-3 w-full text-left text-red-600 hover:bg-red-50 font-semibold text-sm",children:[e.jsx(M,{className:"w-4 h-4 sm:w-5 sm:h-5"})," Logout"]})]})]})]})]})}),e.jsx("div",{className:"h-16 sm:h-20"}),e.jsxs("div",{className:"flex",children:[u&&e.jsx("div",{onClick:()=>m(!1),className:"fixed inset-0 bg-black/40 lg:hidden z-40"}),e.jsxs("aside",{className:`
            fixed lg:static top-16 sm:top-20 left-0
            h-[calc(100vh-64px)] sm:h-[calc(100vh-80px)]
            w-64 sm:w-72 bg-white border-r shadow-xl z-40
            pt-4 sm:pt-6 overflow-y-auto
            transition-transform duration-300
            ${u?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          `,children:[e.jsxs("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6 flex flex-col items-center text-center",children:[e.jsx("img",{src:"/images/sk.png",className:"h-16 w-16 sm:h-20 sm:w-20 rounded-full shadow border"}),e.jsx("h2",{className:"font-bold text-base sm:text-lg mt-2 sm:mt-3 text-blue-700",children:"SK Youth Portal"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500",children:"Empowering Community Youth"})]}),e.jsx("div",{className:"px-3 sm:px-4 space-y-1 sm:space-y-2",children:E.map(s=>e.jsxs(y,{href:s.href,onClick:()=>m(!1),className:`
                  flex items-center gap-3 sm:gap-4 px-3 sm:px-4 py-2.5 sm:py-3 rounded-xl font-semibold text-xs sm:text-sm transition
                  ${I(s.href)?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-blue-100"}
                `,children:[e.jsx(s.icon,{className:"w-4 h-4 sm:w-5 h-5"}),s.label]},s.href))})]}),e.jsx("main",{className:"flex-1 p-3 sm:p-4 lg:p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:S})})]}),e.jsxs("footer",{className:"bg-white border-t py-3 sm:py-4 text-center text-[11px] sm:text-sm text-gray-600",children:["© ",new Date().getFullYear()," SK Youth Portal • All Rights Reserved"]})]})}export{Q as default};
