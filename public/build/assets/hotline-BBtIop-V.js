import{u as k,r,j as e,H as L,b as m}from"./app-Dp8eBqIU.js";import{A as z}from"./app-layout-DQ7AMV3P.js";import{I as n}from"./input-BPBq9ODa.js";import{B as i}from"./button-B99OZixS.js";import{C as F,a as B}from"./card-6wvNZN_t.js";import{D as g,e as I,a as f,b as N,c as v,f as y}from"./dialog-CbfhkJXM.js";import{L as c}from"./label-RmbyJBVD.js";import{z as h,F as P}from"./index-DBS4BxWO.js";import"./app-BLU9PWWC.js";import"./utils-BJ1vGYlN.js";import"./clsx-B-dksMZM.js";import"./index-0TQvwkXz.js";import"./index-D-XRdT2p.js";import"./index-5JiLXXvR.js";import"./index-DCCk8fkd.js";import"./x-CosRwlaN.js";import"./createLucideIcon-BgI95zP9.js";import"./index-DSd_tBaf.js";import"./chevron-down-BkXCBmR0.js";import"./index-Z07DRefU.js";import"./index-CDy59-5j.js";import"./index-CMWG4mbA.js";import"./log-out-BJ7NbZjK.js";import"./users-C4xSFfJR.js";import"./map-pin-vjPQ7KjQ.js";import"./file-text-CLxDmEOh.js";import"./clipboard-list-Czd-FXhb.js";import"./settings-dOOLNFQc.js";function he(){const{hotlines:C,errors:o,flash:l}=k().props,[x,w]=r.useState(""),[H,p]=r.useState(!1),[D,d]=r.useState(!1),[u,j]=r.useState(null),[t,a]=r.useState({name:"",number:""});r.useEffect(()=>{o&&Object.keys(o).length>0&&Object.values(o).forEach(s=>h.error(s)),l?.success&&h.success(l.success),l?.error&&h.error(l.error)},[o,l]);const b=C.filter(s=>s.name.toLowerCase().includes(x.toLowerCase())),E=()=>{m.post("/hotlines",t,{onSuccess:()=>{a({name:"",number:""}),p(!1)}})},A=s=>{j(s),a({name:s.name,number:s.number}),d(!0)},S=()=>{u&&m.put(`/hotlines/${u.id}`,t,{onSuccess:()=>{d(!1),j(null)}})},O=s=>{confirm("Are you sure you want to delete this hotline?")&&m.delete(`/hotlines/${s}`)};return e.jsxs(z,{breadcrumbs:[{title:"Hotlines",href:"#"}],children:[e.jsx(L,{title:"Hotlines"}),e.jsx(P,{position:"top-right"}),e.jsx("div",{className:"mb-10 bg-gradient-to-r from-blue-600 to-blue-300 text-white p-8  shadow-xl",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Emergency Hotlines"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(n,{placeholder:"Search hotline name...",value:x,onChange:s=>w(s.target.value),className:"max-w-sm"}),e.jsxs(g,{open:H,onOpenChange:p,children:[e.jsx(I,{asChild:!0,children:e.jsx(i,{className:"bg-blue-600 text-white hover:bg-blue-700",children:"+ Add Hotline"})}),e.jsxs(f,{className:"sm:max-w-md",children:[e.jsx(N,{children:e.jsx(v,{children:"Add New Hotline"})}),e.jsxs("div",{className:"space-y-4 mt-2",children:[e.jsxs("div",{children:[e.jsx(c,{children:"Name"}),e.jsx(n,{value:t.name,onChange:s=>a({...t,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Number"}),e.jsx(n,{value:t.number,onChange:s=>a({...t,number:s.target.value})})]})]}),e.jsx(y,{className:"mt-4",children:e.jsx(i,{className:"w-full bg-blue-600 text-white hover:bg-blue-700",onClick:E,children:"Add Hotline"})})]})]})]}),e.jsx(F,{className:"shadow-md rounded-2xl overflow-x-auto",children:e.jsx(B,{className:"p-4",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Name"}),e.jsx("th",{className:"px-4 py-2",children:"Number"}),e.jsx("th",{className:"px-4 py-2",children:"Action"})]})}),e.jsx("tbody",{children:b.length>0?b.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-4 py-2",children:s.name}),e.jsx("td",{className:"px-4 py-2",children:s.number}),e.jsxs("td",{className:"px-4 py-2 space-x-2",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>A(s),children:"Edit"}),e.jsx(i,{size:"sm",variant:"destructive",onClick:()=>O(s.id),children:"Delete"})]})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-4 text-gray-500",children:"No hotlines found"})})})]})})})]}),e.jsx(g,{open:D,onOpenChange:d,children:e.jsxs(f,{className:"sm:max-w-md",children:[e.jsx(N,{children:e.jsx(v,{children:"Edit Hotline"})}),e.jsxs("div",{className:"space-y-4 mt-2",children:[e.jsxs("div",{children:[e.jsx(c,{children:"Name"}),e.jsx(n,{value:t.name,onChange:s=>a({...t,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Number"}),e.jsx(n,{value:t.number,onChange:s=>a({...t,number:s.target.value})})]})]}),e.jsx(y,{className:"mt-4",children:e.jsx(i,{className:"w-full bg-blue-600 text-white hover:bg-blue-700",onClick:S,children:"Update Hotline"})})]})})]})}export{he as default};
