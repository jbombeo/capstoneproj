import{u as f,r as i,j as e,H as N,a as w}from"./app-_wj1wiEc.js";import{A as y}from"./app-layout-BSN3Q_UY.js";import{B as n}from"./button-HZSfloRH.js";import{I as v}from"./input-CaSbsQoB.js";import{C as b,a as C}from"./card-DUg4c0sP.js";import{F as R}from"./index-9aUBe4GY.js";import"./app-DgE45SX0.js";import"./utils-csTuJWuA.js";import"./clsx-B-dksMZM.js";import"./index-DVkLe2dy.js";import"./index-DlLLoGOC.js";import"./index-Dl6FYVux.js";import"./index-CObx42Nt.js";import"./x-cF_pgnf8.js";import"./createLucideIcon-Dk2zpREm.js";import"./index-BRMnPjnz.js";import"./chevron-down-Ciywszaj.js";import"./index-CRvzyME4.js";import"./index-CDy59-5j.js";import"./index-CMWG4mbA.js";import"./log-out-CytyyNiJ.js";import"./users-CzPkGoWA.js";import"./map-pin-K0z2MPXY.js";import"./file-text-ZNTU_lRQ.js";import"./clipboard-list-iHk9S1ba.js";import"./settings-B87Gxw1-.js";function W(){const{residents:x}=f().props,[l,m]=i.useState(""),[p,d]=i.useState(!1),[t,h]=i.useState(null),j=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),r=s=>`${s.first_name} ${s.middle_name??""} ${s.last_name}`.trim(),o=x.filter(s=>r(s).toLowerCase().includes(l.toLowerCase())),g=async s=>{if(confirm("Approve this resident?"))try{const a=await w.post(`/residentregistereds/${s}/approve`,{},{headers:{"X-CSRF-TOKEN":j||"",Accept:"application/json"}});a.data.generatedPassword?(alert("Resident approved! Check console for generated password."),console.log("Generated password:",a.data.generatedPassword)):alert("Resident approved."),window.location.reload()}catch(a){console.error(a),alert("Failed to approve resident.")}},u=s=>{h(s),d(!0)},c=s=>s?`/storage/${s}`:"/images/default-avatar.png";return e.jsxs(y,{breadcrumbs:[{title:"Residents",href:"#"}],children:[e.jsx(N,{title:"Residents"}),e.jsx(R,{position:"top-right"}),e.jsxs("div",{className:"mb-10 bg-gradient-to-r from-green-700 to-green-500 text-white p-8 rounded-xl shadow-xl",children:[e.jsx("h1",{className:"text-4xl font-extrabold",children:"Residents Registry"}),e.jsx("p",{className:"opacity-90 text-sm",children:"Official Barangay Resident Information Records"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-white px-5 py-4 rounded-xl shadow border flex justify-between items-center",children:e.jsx(v,{placeholder:"Search resident by name...",value:l,onChange:s=>m(s.target.value),className:"max-w-md"})}),e.jsx(b,{className:"shadow-xl rounded-2xl border overflow-x-auto",children:e.jsx(C,{className:"p-0",children:e.jsxs("table",{className:"w-full table-fixed text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 w-48",children:"Full Name"}),e.jsx("th",{className:"px-6 py-3",children:"Email"}),e.jsx("th",{className:"px-6 py-3 w-16",children:"Age"}),e.jsx("th",{className:"px-6 py-3 w-20",children:"Zone"}),e.jsx("th",{className:"px-6 py-3 w-24",children:"Gender"}),e.jsx("th",{className:"px-6 py-3 w-28",children:"Civil Status"}),e.jsx("th",{className:"px-6 py-3 w-24",children:"Status"}),e.jsx("th",{className:"px-6 py-3 w-32 text-center",children:"Action"})]})}),e.jsx("tbody",{children:o.length>0?o.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition",children:[e.jsxs("td",{className:"px-6 py-4 font-medium flex items-center gap-3",children:[e.jsx("img",{src:c(s.image),className:"h-10 w-10 rounded-full object-cover border"}),r(s)]}),e.jsx("td",{className:"px-6 py-4",children:s.email}),e.jsx("td",{className:"px-6 py-4",children:s.age}),e.jsx("td",{className:"px-6 py-4",children:s.zone?.zone??"N/A"}),e.jsx("td",{className:"px-6 py-4",children:s.gender}),e.jsx("td",{className:"px-6 py-4",children:s.civil_status}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-lg text-white text-xs font-semibold ${s.status==="approved"?"bg-green-600":s.status==="rejected"?"bg-red-600":"bg-yellow-500"}`,children:s.status})}),e.jsxs("td",{className:"px-6 py-4 text-center space-x-2",children:[s.status==="pending"&&e.jsx(n,{size:"sm",className:"bg-green-600 text-white hover:bg-green-700",onClick:()=>g(s.id),children:"Approve"}),e.jsx(n,{size:"sm",variant:"secondary",onClick:()=>u(s),children:"View"})]})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-8 text-gray-500",children:"No residents found."})})})]})})})]}),p&&t&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-lg shadow-xl",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:c(t.image),className:"w-24 h-24 rounded-full object-cover border shadow mb-3"}),e.jsx("h2",{className:"text-xl font-bold",children:r(t)}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Resident Information"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Age:"})," ",t.age]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Gender:"})," ",t.gender]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Civil Status:"})," ",t.civil_status]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Zone:"})," ",t.zone?.zone??"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",t.status]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(n,{onClick:()=>d(!1),children:"Close"})})]})})]})}export{W as default};
