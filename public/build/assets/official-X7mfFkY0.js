import{j as e,u as D,r as c,H as E,b as g}from"./app-CHrjJv7C.js";import{A as P}from"./app-layout-DCiK010d.js";import{I as i}from"./input-CCRLN5kg.js";import{c as I,B as d}from"./button-B2odc3Mr.js";import{C as L,a as k}from"./card-BvWA_Vp3.js";import{D as y,e as U,a as b,b as w,c as N,f as C}from"./dialog-BkpaGwoK.js";import{L as r}from"./label-BH76Topx.js";import{S as F,c as K}from"./utils-DpkqiH3w.js";import"./app-B1aFYef8.js";import"./index-4up-H-0J.js";import"./index-DCA_c2uc.js";import"./index-C-wBWVm_.js";import"./index-5g6cmtIN.js";import"./x-6MjSoi9b.js";import"./createLucideIcon-r-04NXR0.js";import"./index-BmrMFvkv.js";import"./chevron-down-Dus9dkDx.js";import"./index-BBMhhFRK.js";import"./index-CDy59-5j.js";import"./index-CMWG4mbA.js";import"./log-out-yjwyG8Ps.js";import"./users-sN_XFzBw.js";import"./map-pin-BOfusBn5.js";import"./file-text-Dy-rehNU.js";import"./clipboard-list-CeYPJHW-.js";import"./settings-DA-kq5U4.js";import"./clsx-B-dksMZM.js";const z=I("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-auto",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function H({className:m,variant:o,asChild:x=!1,...h}){const p=x?F:"span";return e.jsx(p,{"data-slot":"badge",className:K(z({variant:o}),m),...h})}function ue(){const{officials:m}=D().props,[o,x]=c.useState(""),[h,p]=c.useState(!1),[_,u]=c.useState(!1),[j,v]=c.useState(null),[t,s]=c.useState({position:"",complete_name:"",contact:"",address:"",term_start:"",term_end:"",status:"Active",image:null}),f=m.filter(a=>a.complete_name.toLowerCase().includes(o.toLowerCase())),O=()=>{const a=new FormData;Object.entries(t).forEach(([n,l])=>{l!==null&&a.append(n,l)}),g.post("/officials",a,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{s({position:"",complete_name:"",contact:"",address:"",term_start:"",term_end:"",status:"Active",image:null}),p(!1),alert("Official added successfully!")}})},S=a=>{v(a),s({position:a.position,complete_name:a.complete_name,contact:a.contact,address:a.address,term_start:a.term_start,term_end:a.term_end,status:a.status,image:null}),u(!0)},A=()=>{if(!j)return;const a=new FormData;Object.entries(t).forEach(([n,l])=>{l!==null&&a.append(n,l)}),g.post(`/officials/${j.id}?_method=PUT`,a,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{u(!1),v(null),alert("Official updated successfully!")}})},T=a=>{confirm("Are you sure you want to delete this official?")&&g.delete(`/officials/${a}`,{onSuccess:()=>alert("Official deleted successfully!")})},B=a=>a?`/storage/${a}`:"/images/default-avatar.png";return e.jsxs(P,{breadcrumbs:[{title:"Officials",href:"#"}],children:[e.jsx(E,{title:"Officials"}),e.jsxs("div",{className:"mb-10 bg-gradient-to-r from-blue-600 to-blue-300 text-white p-8  shadow-xl",children:[e.jsx("h1",{className:"text-4xl font-extrabold",children:"Barangay Officials"}),e.jsx("p",{className:"opacity-90 text-sm",children:"Official Barangay Roster and Term Information"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 bg-white px-5 py-4 rounded-xl shadow border",children:[e.jsx(i,{placeholder:"Search by official name...",value:o,onChange:a=>x(a.target.value),className:"max-w-md"}),e.jsxs(y,{open:h,onOpenChange:p,children:[e.jsx(U,{asChild:!0,children:e.jsx(d,{className:"bg-blue-600 text-white hover:bg-blue-700",children:"+ Add Official"})}),e.jsxs(b,{className:"sm:max-w-md",children:[e.jsx(w,{children:e.jsx(N,{children:"Add New Official"})}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Position"}),e.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:t.position,onChange:a=>s({...t,position:a.target.value}),children:[e.jsx("option",{value:"",children:"Select Position"}),e.jsx("option",{value:"Punong Barangay",children:"Punong Barangay"}),e.jsx("option",{value:"Barangay Kagawad",children:"Barangay Kagawad"}),e.jsx("option",{value:"Secretary",children:"Secretary"}),e.jsx("option",{value:"Treasurer",children:"Treasurer"})]})]}),["complete_name","contact","address"].map(a=>e.jsxs("div",{children:[e.jsx(r,{children:a.replace("_"," ").toUpperCase()}),e.jsx(i,{value:t[a],onChange:n=>s({...t,[a]:n.target.value})})]},a)),e.jsxs("div",{children:[e.jsx(r,{children:"Term Start"}),e.jsx(i,{type:"date",value:t.term_start,onChange:a=>s({...t,term_start:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Term End"}),e.jsx(i,{type:"date",value:t.term_end,onChange:a=>s({...t,term_end:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:t.status,onChange:a=>s({...t,status:a.target.value}),children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Leave",children:"Leave"})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>{a.target.files&&s({...t,image:a.target.files[0]})}})]})]}),e.jsx(C,{className:"mt-4",children:e.jsx(d,{className:"w-full bg-blue-600 text-white hover:bg-blue-700",onClick:O,children:"Add Official"})})]})]})]}),e.jsx(L,{className:"shadow-xl rounded-2xl border overflow-x-auto",children:e.jsx(k,{className:"p-0",children:e.jsxs("table",{className:"w-full text-sm text-left table-fixed min-w-[1100px]",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 w-28",children:"Image"}),e.jsx("th",{className:"px-6 py-3 w-56",children:"Position"}),e.jsx("th",{className:"px-6 py-3 w-64",children:"Name"}),e.jsx("th",{className:"px-6 py-3 w-40",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 w-64",children:"Address"}),e.jsx("th",{className:"px-6 py-3 w-40",children:"Term Start"}),e.jsx("th",{className:"px-6 py-3 w-40",children:"Term End"}),e.jsx("th",{className:"px-6 py-3 w-32 text-center",children:"Status"}),e.jsx("th",{className:"px-6 py-3 w-36 text-center",children:"Action"})]})}),e.jsx("tbody",{children:f.length>0?f.map(a=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("img",{src:B(a.image),className:"w-12 h-12 rounded-full object-cover border shadow"})}),e.jsx("td",{className:"px-6 py-4 font-semibold text-gray-900",children:a.position}),e.jsx("td",{className:"px-6 py-4",children:a.complete_name}),e.jsx("td",{className:"px-6 py-4",children:a.contact}),e.jsx("td",{className:"px-6 py-4",children:a.address}),e.jsx("td",{className:"px-6 py-4",children:a.term_start}),e.jsx("td",{className:"px-6 py-4",children:a.term_end}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx(H,{className:a.status==="Active"?"bg-green-600":a.status==="Leave"?"bg-yellow-500":"bg-gray-500",children:a.status})}),e.jsxs("td",{className:"px-6 py-4 text-center space-x-2",children:[e.jsx(d,{size:"sm",variant:"outline",onClick:()=>S(a),children:"Edit"}),e.jsx(d,{size:"sm",variant:"destructive",onClick:()=>T(a.id),children:"Delete"})]})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-center py-8 text-gray-500",children:"No officials found"})})})]})})})]}),e.jsx(y,{open:_,onOpenChange:u,children:e.jsxs(b,{className:"sm:max-w-md",children:[e.jsx(w,{children:e.jsx(N,{children:"Edit Official"})}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Position"}),e.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:t.position,onChange:a=>s({...t,position:a.target.value}),children:[e.jsx("option",{value:"",children:"Select Position"}),e.jsx("option",{value:"Punong Barangay",children:"Punong Barangay"}),e.jsx("option",{value:"Barangay Kagawad",children:"Barangay Kagawad"}),e.jsx("option",{value:"Secretary",children:"Secretary"}),e.jsx("option",{value:"Treasurer",children:"Treasurer"})]})]}),["complete_name","contact","address"].map(a=>e.jsxs("div",{children:[e.jsx(r,{children:a.replace("_"," ").toUpperCase()}),e.jsx(i,{value:t[a],onChange:n=>s({...t,[a]:n.target.value})})]},a)),e.jsxs("div",{children:[e.jsx(r,{children:"Term Start"}),e.jsx(i,{type:"date",value:t.term_start,onChange:a=>s({...t,term_start:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Term End"}),e.jsx(i,{type:"date",value:t.term_end,onChange:a=>s({...t,term_end:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:t.status,onChange:a=>s({...t,status:a.target.value}),children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Leave",children:"Leave"})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>{a.target.files&&s({...t,image:a.target.files[0]})}})]})]}),e.jsx(C,{className:"mt-4",children:e.jsx(d,{className:"w-full bg-blue-600 text-white hover:bg-blue-700",onClick:A,children:"Update Official"})})]})})]})}export{ue as default};
