import{r as m,j as e,H as y,b as N,L as w}from"./app-BYDD7jqK.js";import{M as v}from"./menu-Ban9xf_5.js";import{X as _}from"./x-JC7lT9T1.js";import{H as C,S as k}from"./settings-D0VBnQjg.js";import{U as S}from"./user-xgZr-Gwy.js";import{S as R}from"./shield-check-7bCZdR1a.js";import{F as q}from"./file-text-BVrqHHw0.js";import{L as F}from"./log-out-Be8tPfcd.js";/* empty css            */import"./createLucideIcon-DdLpzc9k.js";const M=[{name:"Home",icon:C,href:"/resident/home"},{name:"Profile",icon:S,href:"/resident/profile"},{name:"Barangay Official",icon:R,href:"/resident/officials"},{name:"Request Document",icon:q,href:"/resident/document-requests"},{name:"Settings",icon:k,href:"/resident/settings"}],D=t=>({pending:"bg-gray-400 text-white","on process":"bg-yellow-400 text-gray-900","ready for pick-up":"bg-blue-400 text-white",released:"bg-green-400 text-white"})[t]||"bg-gray-400 text-white",P=t=>{if(!t)return"-";switch(t.toLowerCase()){case"cash":return"Cash";case"gcash":return"GCash";case"free":return"Free";default:return t}};function L({open:t,onClose:n}){return e.jsxs(e.Fragment,{children:[e.jsxs("aside",{className:`fixed inset-0 z-40 lg:static lg:w-80 
          bg-gradient-to-b from-blue-900 to-blue-800 shadow-2xl 
          flex flex-col transition-transform duration-300
          ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[e.jsxs("div",{className:"p-6 lg:p-8 border-b border-blue-700 flex flex-col items-center relative",children:[e.jsx("button",{onClick:n,className:"lg:hidden absolute top-4 right-4 text-white",children:e.jsx(_,{className:"w-6 h-6"})}),e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden mb-4",children:e.jsx("img",{src:"/images/logo.png",alt:"Logo",className:"w-full h-full object-contain"})}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Barangay Portal"})]}),e.jsx("nav",{className:"flex-1 p-4 sm:p-6 space-y-1",children:M.map(r=>e.jsxs(w,{href:r.href,className:"flex items-center p-4 rounded-lg hover:bg-green-700/50 text-white transition group",children:[e.jsx(r.icon,{className:"w-5 h-5 mr-4 text-white group-hover:scale-110 transition-transform"}),e.jsx("span",{children:r.name})]},r.name))}),e.jsx("div",{className:"p-4 sm:p-6 border-t border-blue-700",children:e.jsxs("button",{onClick:()=>console.log("/logout"),className:"w-full flex items-center justify-center p-4 rounded-lg bg-blue-700/50 hover:bg-red-600 text-white",children:[e.jsx(F,{className:"w-5 h-5 mr-3"}),"Logout"]})})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:n})]})}function O({req:t}){const n=t.payment?.method??"";return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center gap-4 hover:shadow-xl transition",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 text-center",children:t.document_type?.name||"-"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${D(t.status)}`,children:t.status}),e.jsxs("div",{className:"mt-2 text-gray-600 text-center text-sm",children:[e.jsxs("p",{children:["Purpose: ",t.purpose||"-"]}),t.payment&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Payment Method: ",P(n)]}),e.jsxs("p",{children:["Amount Paid: ₱",Number(t.payment.amount??0).toFixed(2)]}),n.toLowerCase()==="gcash"&&t.payment.reference_number&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Reference Number: ",t.payment.reference_number]}),e.jsx("img",{src:"/images/gcash-qr.png",alt:"GCash QR",className:"w-24 h-24 mx-auto mt-2"})]})]})]})]})}function E({form:t,setForm:n,onClose:r,onSubmit:u,documentTypes:o}){return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Request Document"}),e.jsxs("form",{onSubmit:u,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Document Type"}),e.jsxs("select",{className:"w-full border rounded p-2",value:t.document_type_id,onChange:s=>{const c=s.target.value===""?"":Number(s.target.value),l=o.find(a=>a.id===c);n({...t,document_type_id:c,payment:{...t.payment,amount:l?Number(l.amount):0}})},required:!0,children:[e.jsx("option",{value:"",children:"-- Select Document --"}),o.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (₱",Number(s.amount).toFixed(2),")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Purpose"}),e.jsx("input",{type:"text",className:"w-full border rounded p-2",value:t.purpose,onChange:s=>n({...t,purpose:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Payment Method"}),e.jsxs("select",{className:"w-full border rounded p-2",value:t.payment.method,onChange:s=>n({...t,payment:{...t.payment,method:s.target.value}}),children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"gcash",children:"GCash"}),e.jsx("option",{value:"free",children:"Free"})]})]}),t.payment.method==="gcash"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Reference Number"}),e.jsx("input",{type:"text",className:"w-full border rounded p-2",value:t.payment.reference_number||"",onChange:s=>n({...t,payment:{...t.payment,reference_number:s.target.value}}),required:!0}),e.jsx("img",{src:"/images/gcash-qr.png",alt:"GCash QR",className:"w-24 h-24 mx-auto mt-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Amount"}),e.jsx("input",{type:"number",className:"w-full border rounded p-2 bg-gray-100",value:t.payment.amount!==""?Number(t.payment.amount).toFixed(2):"",readOnly:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx("button",{type:"button",className:"px-4 py-2 rounded border",onClick:r,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Submit"})]})]})]})})}function $({requests:t,documentTypes:n}){const[r,u]=m.useState(t||[]),[o,s]=m.useState(!1),[c,l]=m.useState(!1),[a,b]=m.useState({document_type_id:"",purpose:"",payment:{method:"cash",amount:0,reference_number:""}}),g=async i=>{i.preventDefault();try{const h=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",d={document_type_id:a.document_type_id===""?null:Number(a.document_type_id),purpose:a.purpose,payment_method:a.payment.method,amount:a.payment.method==="free"?0:Number(a.payment.amount),reference_number:a.payment.method==="gcash"?a.payment.reference_number:null},x=await N.post("/resident/document-requests",d,{headers:{"X-CSRF-TOKEN":h}}),f=n.find(p=>p.id===Number(a.document_type_id)),j={id:x.data.data.id,document_type:f||{id:0,name:"Unknown",amount:0},purpose:a.purpose,status:x.data.data.status??"pending",payment:x.data.data.payments?.[0]??{method:d.payment_method,amount:d.amount,reference_number:d.reference_number}};u(p=>[...p,j]),b({document_type_id:"",purpose:"",payment:{method:"cash",amount:0,reference_number:""}}),l(!1)}catch(h){console.error("Failed to submit request:",h),alert("Failed to submit request. Please try again.")}};return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-gray-100",children:[e.jsx(y,{title:"Request Document"}),e.jsx(L,{open:o,onClose:()=>s(!1)}),e.jsxs("main",{className:"flex-1 flex flex-col min-h-screen p-4 sm:p-6 lg:p-10",children:[e.jsxs("div",{className:"lg:hidden flex items-center justify-between mb-4 p-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-lg",children:[e.jsx("button",{onClick:()=>s(!0),children:e.jsx(v,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-lg font-bold",children:"Document Requests"}),e.jsx("div",{className:"w-6 h-6"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold hidden lg:block",children:"Document Requests"}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>l(!0),children:"+ Request Document"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:r.length===0?e.jsx("p",{className:"col-span-full text-center text-gray-500 py-16",children:"No document requests yet."}):r.map(i=>e.jsx(O,{req:i},i.id))})]}),c&&e.jsx(E,{form:a,setForm:b,onClose:()=>l(!1),onSubmit:g,documentTypes:n})]})}export{$ as default};
