import{u as q,r as o,j as e,H as G,a as _}from"./app-BYDD7jqK.js";import{A as J}from"./app-layout-DwJpk70a.js";import{I as c}from"./input-iCoYWyDm.js";import{B as p}from"./button-Dr-gN8dc.js";import{C as K,a as Q}from"./card-JB1H8R4P.js";import{D as b,a as V,b as w,c as B,d as A}from"./dialog-A7zjs0bz.js";import{L as i}from"./label-CHedX6Vx.js";import{F as W,z as f}from"./index-BhTkidEM.js";/* empty css            */import"./app-sidebar-header-p_ZutQgq.js";import"./createLucideIcon-DdLpzc9k.js";import"./index-B2jg6ky-.js";import"./index-CoyH5QwD.js";import"./index-WOlHJoPy.js";import"./index-DwhOcVGB.js";import"./log-out-Be8tPfcd.js";import"./x-JC7lT9T1.js";import"./index-fql2wrXq.js";import"./settings-D0VBnQjg.js";import"./file-text-BVrqHHw0.js";const L=({formData:s,setFormData:l,onSubmit:g,onCancel:r,submitLabel:j})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"complainant",children:"Complainant"}),e.jsx(c,{id:"complainant",value:s.complainant,onChange:n=>l(a=>({...a,complainant:n.target.value}))})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"complainant_address",children:"Complainant Address"}),e.jsx(c,{id:"complainant_address",value:s.complainant_address,onChange:n=>l(a=>({...a,complainant_address:n.target.value}))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{htmlFor:"complainant_age",children:"Complainant Age"}),e.jsx(c,{id:"complainant_age",type:"number",value:s.complainant_age,onChange:n=>l(a=>({...a,complainant_age:n.target.value}))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{htmlFor:"complainant_contact",children:"Complainant Contact"}),e.jsx(c,{id:"complainant_contact",value:s.complainant_contact,onChange:n=>l(a=>({...a,complainant_contact:n.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"complainee",children:"Complainee"}),e.jsx(c,{id:"complainee",value:s.complainee,onChange:n=>l(a=>({...a,complainee:n.target.value}))})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"complainee_address",children:"Complainee Address"}),e.jsx(c,{id:"complainee_address",value:s.complainee_address,onChange:n=>l(a=>({...a,complainee_address:n.target.value}))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{htmlFor:"complainee_age",children:"Complainee Age"}),e.jsx(c,{id:"complainee_age",type:"number",value:s.complainee_age,onChange:n=>l(a=>({...a,complainee_age:n.target.value}))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{htmlFor:"complainee_contact",children:"Complainee Contact"}),e.jsx(c,{id:"complainee_contact",value:s.complainee_contact,onChange:n=>l(a=>({...a,complainee_contact:n.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"complaint",children:"Complaint"}),e.jsx(c,{id:"complaint",value:s.complaint,onChange:n=>l(a=>({...a,complaint:n.target.value}))})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"status",children:"Status"}),e.jsxs("select",{id:"status",value:s.status,onChange:n=>l(a=>({...a,status:n.target.value})),className:"border rounded px-2 py-1 w-full",children:[e.jsx("option",{value:"unsettled",children:"Unsettled"}),e.jsx("option",{value:"settled",children:"Settled"}),e.jsx("option",{value:"scheduled",children:"Scheduled"})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"action",children:"Action"}),e.jsx(c,{id:"action",value:s.action,onChange:n=>l(a=>({...a,action:n.target.value}))})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"incidence",children:"Incidence"}),e.jsx(c,{id:"incidence",value:s.incidence,onChange:n=>l(a=>({...a,incidence:n.target.value}))})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"handled_by",children:"Handled By"}),e.jsx(c,{id:"handled_by",value:s.handled_by,onChange:n=>l(a=>({...a,handled_by:n.target.value}))})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"incident_datetime",children:"Incident Date & Time"}),e.jsx(c,{id:"incident_datetime",type:"datetime-local",value:s.incident_datetime,onChange:n=>l(a=>({...a,incident_datetime:n.target.value}))})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(p,{variant:"outline",onClick:()=>{r(),l({complainant:"",complainant_address:"",complainant_age:"",complainant_contact:"",complainee:"",complainee_address:"",complainee_age:"",complainee_contact:"",complaint:"",status:"unsettled",action:"",incidence:"",handled_by:"",incident_datetime:new Date().toISOString().slice(0,16)})},children:"Cancel"}),e.jsx(p,{onClick:g,children:j})]})]});function je(){const{blotters:s}=q().props,[l,g]=o.useState(""),[r,j]=o.useState(""),[n,a]=o.useState(""),[O,v]=o.useState(!1),[F,h]=o.useState(!1),[y,C]=o.useState(null),[x,u]=o.useState({complainant:"",complainant_address:"",complainant_age:"",complainant_contact:"",complainee:"",complainee_address:"",complainee_age:"",complainee_contact:"",complaint:"",status:"unsettled",action:"",incidence:"",handled_by:"",incident_datetime:new Date().toISOString().slice(0,16)}),N=()=>{u({complainant:"",complainant_address:"",complainant_age:"",complainant_contact:"",complainee:"",complainee_address:"",complainee_age:"",complainee_contact:"",complaint:"",status:"unsettled",action:"",incidence:"",handled_by:"",incident_datetime:new Date().toISOString().slice(0,16)})},m=s.filter(t=>{const d=t.complainant.toLowerCase().includes(l.toLowerCase())||t.complainee.toLowerCase().includes(l.toLowerCase()),S=t.incident_datetime?new Date(t.incident_datetime):null,P=r?S?.getMonth()===Number(r)-1:!0,R=n?S?.getFullYear()===Number(n):!0;return d&&P&&R}),I=()=>{_.post("/blotters",{...x},{onSuccess:()=>{N(),v(!1),f.success("Blotter added successfully!")}})},E=t=>{C(t),u({complainant:t.complainant,complainant_address:t.complainant_address??"",complainant_age:t.complainant_age?.toString()??"",complainant_contact:t.complainant_contact??"",complainee:t.complainee,complainee_address:t.complainee_address??"",complainee_age:t.complainee_age?.toString()??"",complainee_contact:t.complainee_contact??"",complaint:t.complaint,status:t.status,action:t.action??"",incidence:t.incidence??"",handled_by:t.handled_by??"",incident_datetime:t.incident_datetime??new Date().toISOString().slice(0,16)}),h(!0)},Y=()=>{y&&_.put(`/blotters/${y.id}`,{...x},{onSuccess:()=>{h(!1),C(null),N(),f.success("Blotter updated successfully!")}})},U=t=>{confirm("Are you sure you want to delete this blotter?")&&_.delete(`/blotters/${t}`,{onSuccess:()=>{f.error("Blotter deleted successfully!")}})},H={unsettled:"bg-red-200 text-red-800",settled:"bg-green-200 text-green-800",scheduled:"bg-blue-200 text-blue-800"},M=m.filter(t=>t.status==="unsettled").length,k=m.filter(t=>t.status==="settled").length,z=m.filter(t=>t.status==="scheduled").length,T=new Date().getFullYear(),$=Array.from({length:10},(t,d)=>(T-d).toString());return e.jsxs(J,{breadcrumbs:[{title:"Blotters",href:"#"}],children:[e.jsx(G,{title:"Blotters"}),e.jsx(W,{containerStyle:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),e.jsx("div",{className:"flex justify-between items-center mb-8 bg-green-600 text-white shadow-lg p-6",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Blotters List"})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[e.jsx(c,{placeholder:"Search by complainant or complainee...",value:l,onChange:t=>g(t.target.value),className:"flex-1 min-w-[200px]"}),e.jsxs("select",{className:"border rounded px-2 py-1",value:r,onChange:t=>j(t.target.value),children:[e.jsx("option",{value:"",children:"All Months"}),Array.from({length:12},(t,d)=>e.jsx("option",{value:(d+1).toString().padStart(2,"0"),children:new Date(0,d).toLocaleString("default",{month:"long"})},d+1))]}),e.jsxs("select",{className:"border rounded px-2 py-1",value:n,onChange:t=>a(t.target.value),children:[e.jsx("option",{value:"",children:"All Years"}),$.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs(b,{open:O,onOpenChange:v,children:[e.jsx(V,{asChild:!0,children:e.jsx(p,{className:"bg-blue-600 text-white hover:bg-blue-700 ml-auto whitespace-nowrap",children:"+ Add Blotter"})}),e.jsxs(w,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx(B,{children:e.jsx(A,{children:"Add Blotter"})}),e.jsx(L,{formData:x,setFormData:u,onSubmit:I,onCancel:()=>v(!1),submitLabel:"Add"})]})]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 bg-red-100 text-red-800 rounded-lg shadow p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:M}),e.jsx("div",{children:"Unsettled"})]}),e.jsxs("div",{className:"flex-1 bg-green-100 text-green-800 rounded-lg shadow p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:k}),e.jsx("div",{children:"Settled"})]}),e.jsxs("div",{className:"flex-1 bg-blue-100 text-blue-800 rounded-lg shadow p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:z}),e.jsx("div",{children:"Scheduled"})]})]}),e.jsx(K,{className:"shadow-md rounded-2xl overflow-x-auto",children:e.jsx(Q,{className:"p-4",children:e.jsx("div",{className:"overflow-y-auto max-h-[400px]",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Complainant"}),e.jsx("th",{className:"px-4 py-2",children:"Complainee"}),e.jsx("th",{className:"px-4 py-2",children:"Complaint"}),e.jsx("th",{className:"px-4 py-2",children:"Status"}),e.jsx("th",{className:"px-4 py-2",children:"Handled By"}),e.jsx("th",{className:"px-4 py-2",children:"Incident Date"}),e.jsx("th",{className:"px-4 py-2",children:"Action"}),e.jsx("th",{className:"px-4 py-2",children:"Options"})]})}),e.jsx("tbody",{children:m.length>0?m.map(t=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-4 py-2",children:t.complainant}),e.jsx("td",{className:"px-4 py-2",children:t.complainee}),e.jsx("td",{className:"px-4 py-2",children:t.complaint}),e.jsx("td",{className:`px-4 py-2 rounded-lg font-semibold text-center ${H[t.status]}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),e.jsx("td",{className:"px-4 py-2",children:t.handled_by}),e.jsx("td",{className:"px-4 py-2",children:t.incident_datetime?.slice(0,16).replace("T"," ")}),e.jsx("td",{className:"px-4 py-2",children:t.action}),e.jsxs("td",{className:"px-4 py-2 flex gap-2",children:[e.jsx(p,{size:"sm",onClick:()=>E(t),children:"Edit"}),e.jsx(p,{size:"sm",variant:"destructive",onClick:()=>U(t.id),children:"Delete"})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-4 text-gray-500",children:"No records found"})})})]})})})}),e.jsx(b,{open:F,onOpenChange:h,children:e.jsxs(w,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx(B,{children:e.jsx(A,{children:"Edit Blotter"})}),e.jsx(L,{formData:x,setFormData:u,onSubmit:Y,onCancel:()=>h(!1),submitLabel:"Update"})]})})]})}export{je as default};
