import{d as C,r as m,j as e}from"./app-_wj1wiEc.js";import $ from"./Card-CsyajpXh.js";import I from"./button-4ybwTwlE.js";import{c as y}from"./createLucideIcon-Dk2zpREm.js";import{C as R}from"./clipboard-list-iHk9S1ba.js";import"./app-DgE45SX0.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],q=y("BadgeCheck",T);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],A=y("CalendarClock",D);function z({scholarship:t}){const{post:j,processing:b}=C(),s=t.application_status,[u,a]=m.useState(null),[M,v]=m.useState(!1),[x,h]=m.useState(""),n=m.useRef(null),l=`sk_reminder_${t.id}`;function p(){if(!t.interview_date||!t.interview_time)return null;const i=new Date(`${t.interview_date}T${t.interview_time}`);return isNaN(i.getTime())?null:i}function N(i,r){if("Notification"in window&&Notification.permission==="granted")try{new Notification(i,{body:r})}catch{alert(`${i}

${r}`)}else alert(`${i}

${r}`)}function f(i,r){n.current&&(window.clearTimeout(n.current),n.current=null);const o=Date.now(),d=i-o;if(d<=0){N("Interview reminder",`${r.title} interview is happening now.`),a(r),localStorage.setItem(l,JSON.stringify(r));return}const c=window.setTimeout(()=>{N(`Interview reminder — ${r.title}`,`Your interview for "${r.title}" starts at ${r.interview_date} ${r.interview_time}`),localStorage.removeItem(l),a(null),n.current=null},d);n.current=c}async function _(){if(!("Notification"in window))return!1;if(Notification.permission==="granted")return!0;if(Notification.permission==="denied")return!1;v(!0);const i=await Notification.requestPermission();return v(!1),i==="granted"}async function g(i){const r=p();if(!r){alert("Interview date/time is not set for this application.");return}const o=r.getTime()-i*6e4;if(o<=Date.now()){alert("Selected reminder time is in the past. Choose a shorter reminder time.");return}if(!await _()){const w={title:t.title,interview_date:t.interview_date,interview_time:t.interview_time,minutesBefore:i,scheduledAt:Date.now(),note:"Notifications not granted — reminder saved but browser notification won't appear."};localStorage.setItem(l,JSON.stringify(w)),a(w),f(o,w),alert("Notifications are blocked/unsupported. Reminder saved locally but no browser notification will appear.");return}const c={title:t.title,interview_date:t.interview_date,interview_time:t.interview_time,minutesBefore:i,scheduledAt:Date.now()};localStorage.setItem(l,JSON.stringify(c)),a(c),f(o,c)}function k(){n.current&&(window.clearTimeout(n.current),n.current=null),localStorage.removeItem(l),a(null),alert("Reminder cancelled.")}m.useEffect(()=>{n.current&&(window.clearTimeout(n.current),n.current=null);const i=localStorage.getItem(l);if(i){try{const r=JSON.parse(i);if(!p()){localStorage.removeItem(l),a(null);return}const d=new Date(`${r.interview_date}T${r.interview_time}`).getTime()-(r.minutesBefore||0)*6e4;d>Date.now()?(a(r),f(d,r)):(localStorage.removeItem(l),a(null))}catch{localStorage.removeItem(l),a(null)}return()=>{n.current&&(window.clearTimeout(n.current),n.current=null)}}},[t.interview_date,t.interview_time,t.id]);const S=!!(t.interview_date&&t.interview_time);return e.jsxs($,{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Official SK Scholarship Program"})]}),s&&e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${s==="pending"?"bg-yellow-100 text-yellow-800 border-yellow-300":s==="for interview"?"bg-blue-100 text-blue-800 border-blue-300":s==="for requirement"?"bg-orange-100 text-orange-800 border-orange-300":s==="granted"?"bg-green-100 text-green-800 border-green-300":"bg-gray-100 text-gray-700 border-gray-300"}`,children:s.toUpperCase()})]}),s==="for interview"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex gap-3 items-start",children:[e.jsx(A,{className:"w-6 h-6 text-blue-700"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900",children:"Interview Schedule"}),e.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[e.jsx("strong",{children:"Date:"})," ",t.interview_date||"Not set"]}),e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Time:"})," ",t.interview_time||"Not set"]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Reminders"}),u?e.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:["Scheduled ",u.minutesBefore," minutes before interview"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Interview: ",u.interview_date," ",u.interview_time]})]}),e.jsx("button",{onClick:k,className:"ml-auto px-3 py-1 bg-red-500 text-white text-sm rounded-lg",children:"Cancel"})]}):e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 items-center",children:[e.jsx("button",{onClick:()=>g(1440),className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 text-sm rounded-lg",children:"1 day before"}),e.jsx("button",{onClick:()=>g(60),className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 text-sm rounded-lg",children:"1 hour before"}),e.jsx("button",{onClick:()=>g(30),className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 text-sm rounded-lg",children:"30 minutes before"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:1,placeholder:"minutes",value:x,onChange:i=>h(i.target.value===""?"":Number(i.target.value)),className:"w-24 px-2 py-1 border rounded"}),e.jsx("button",{onClick:()=>{if(!x||Number(x)<=0){alert("Enter custom minutes before interview (positive number).");return}g(Number(x))},className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 text-sm rounded-lg",children:"Set"})]})]})]}),!S&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"No interview schedule set yet. Reminders require interview date/time."})]})]}),t.remarks&&e.jsxs("div",{className:"bg-gray-50 border border-gray-300 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"Remarks:"}),e.jsx("p",{className:"text-sm text-gray-700 mt-1 whitespace-pre-line",children:t.remarks})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed text-sm",children:t.description}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs tracking-wide uppercase text-blue-700 font-medium",children:"Grant Amount"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-900 mt-1",children:["₱",Number(t.grant_amount).toLocaleString()]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxs("p",{className:"font-semibold text-gray-900 flex items-center gap-2 mb-3",children:[e.jsx(R,{className:"w-5 h-5 text-gray-700"})," Requirements"]}),e.jsx("ul",{className:"space-y-2 text-sm text-gray-700",children:Array.isArray(t.requirements)?t.requirements.map((i,r)=>e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 bg-gray-500 rounded-full"}),e.jsx("span",{children:i})]},r)):e.jsx("li",{className:"text-gray-500",children:"No requirements listed"})})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[!s&&e.jsx(I,{full:!0,label:b?"Submitting...":"Apply Now",onClick:()=>j(`/youth/scholarships/${t.id}/apply`,{preserveScroll:!0,preserveState:!0}),disabled:b,className:"bg-blue-700 hover:bg-blue-800 text-white font-semibold tracking-wide py-3 rounded-lg"}),s==="granted"&&e.jsxs("div",{className:"flex items-center gap-2 text-green-700 font-semibold text-sm",children:[e.jsx(q,{className:"w-5 h-5"})," Congratulations! Your scholarship is granted."]})]})]})}export{z as default};
