import{r as a,d as g,j as e,H as C,L as F}from"./app-XOPTMjug.js";import{X as L}from"./x-Bv1O4pW9.js";import{H as O,L as D}from"./log-out-CUpKvNT0.js";import{U as H}from"./user-CJvqTFZq.js";import{S as M}from"./shield-check-mkXmRkgp.js";import{F as u}from"./file-text-D9QnVhaT.js";import{M as h}from"./message-square-CqkrHEaH.js";import{S as P}from"./settings-BxToKCzk.js";import{P as z}from"./plus-Chl-C3Ax.js";import{M as T}from"./menu-CxxJs_Ef.js";import"./app-nfuc1qUJ.js";import"./createLucideIcon-Bv13kPL-.js";function G({feedbacks:l=[]}){const[d,n]=a.useState(!1),[p,o]=a.useState(!1),[i,c]=a.useState(l),{data:t,setData:m,post:b,processing:f,reset:w}=g({type:"",message:""}),[x,r]=a.useState({show:!1,msg:""});a.useEffect(()=>{c(l)},[l]);const j=s=>{switch(s){case"feedback":return"bg-blue-600 text-white";case"suggestion":return"bg-green-600 text-white";case"complaint":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},y=s=>{switch(s){case"pending":return"bg-yellow-500 text-white";case"reviewed":return"bg-blue-500 text-white";case"resolved":return"bg-green-600 text-white";default:return"bg-gray-400 text-white"}},N=s=>{if(s.preventDefault(),!t.type||!t.message){r({show:!0,msg:"Please complete all fields."}),setTimeout(()=>r({show:!1}),3e3);return}b("/resident/feedback/store",{onSuccess:()=>{w(),o(!1),r({show:!0,msg:"Feedback submitted!"}),setTimeout(()=>r({show:!1}),3e3),c([{id:Date.now(),type:t.type,message:t.message,created_at:new Date().toISOString(),status:"pending",resident:{name:"You"}},...i])}})},v=[{name:"Home",icon:O,href:"/resident/home"},{name:"Profile",icon:H,href:"/resident/profile"},{name:"Barangay Officials",icon:M,href:"/resident/officials"},{name:"Request Document",icon:u,href:"/resident/document-requests"},{name:"Blotter",icon:u,href:"/resident/blotters"},{name:"Suggest",icon:h,href:"/resident/feedback"},{name:"Settings",icon:P,href:"/resident/settings"}],{post:S}=g(),k=()=>S("/logout");return e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Suggestions & Feedback"}),e.jsxs("div",{className:"min-h-screen flex bg-gray-100 overflow-hidden",children:[e.jsxs("aside",{className:`
                        fixed inset-0 z-40 lg:static lg:w-72 xl:w-80 
                        bg-gradient-to-b from-blue-900 to-blue-800 shadow-2xl flex flex-col 
                        transform transition-transform duration-300 ease-in-out
                        ${d?"translate-x-0":"-translate-x-full lg:translate-x-0"}
                    `,children:[e.jsxs("div",{className:"p-6 border-b border-blue-700 flex flex-col items-center relative",children:[e.jsx("button",{className:"lg:hidden absolute top-4 right-4 text-white",onClick:()=>n(!1),children:e.jsx(L,{className:"w-6 h-6"})}),e.jsx("img",{src:"/images/logo.png",className:"w-20 h-20 rounded-full mb-3 object-contain"}),e.jsx("h1",{className:"text-xl font-bold text-white text-center",children:"Barangay Portal"})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-5 space-y-1",children:v.map(s=>e.jsxs(F,{href:s.href,className:`flex items-center p-4 rounded-lg hover:bg-green-700/50\r
                                    text-white text-sm transition group`,children:[e.jsx(s.icon,{className:"w-5 h-5 mr-4"}),s.name]},s.name))}),e.jsx("div",{className:"p-5 border-t border-blue-700",children:e.jsxs("button",{onClick:k,className:`w-full flex items-center justify-center p-3 rounded-lg \r
                                bg-blue-700/50 hover:bg-red-600 text-white transition`,children:[e.jsx(D,{className:"w-5 h-5 mr-3"}),"Logout"]})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-30 lg:hidden",onClick:()=>n(!1)}),e.jsxs("main",{className:"flex-1 min-h-screen overflow-x-hidden",children:[e.jsxs("header",{className:`\r
                        bg-gradient-to-r from-blue-600 to-blue-500 \r
                        p-6 sm:p-8 text-white shadow-lg\r
                        flex flex-col sm:flex-row sm:items-center justify-between gap-4\r
                    `,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(h,{className:"w-10 h-10 sm:w-12 sm:h-12"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold",children:"Suggestions & Feedback"}),e.jsx("p",{className:"text-blue-200 text-sm mt-1",children:"Help improve your barangay."})]})]}),e.jsxs("button",{onClick:()=>o(!0),className:`flex items-center gap-2 bg-white text-blue-700 \r
                                    font-bold px-4 py-2 rounded-lg shadow hover:bg-gray-100`,children:[e.jsx(z,{className:"w-5 h-5"})," Add Feedback"]}),e.jsx("button",{className:"absolute top-5 right-5 lg:hidden text-white bg-blue-700/50 p-2 rounded-lg",onClick:()=>n(!0),children:e.jsx(T,{className:"w-6 h-6"})})]}),e.jsx("section",{className:`\r
                        max-w-7xl mx-auto \r
                        p-4 sm:p-6 lg:p-10\r
                        grid gap-6\r
                        grid-cols-1 sm:grid-cols-2 lg:grid-cols-3\r
                    `,children:i.length===0?e.jsx("p",{className:"col-span-full text-center text-gray-500 py-10",children:"No feedback submitted yet."}):i.map(s=>e.jsxs("div",{className:`\r
                                        relative bg-white rounded-2xl shadow-xl \r
                                        border border-gray-200 p-6 flex flex-col gap-3 \r
                                        hover:shadow-2xl hover:-translate-y-1 \r
                                        transition-all duration-300\r
                                    `,children:[e.jsx("span",{className:`absolute top-4 right-4 px-3 py-1 text-xs 
                                        font-bold uppercase rounded-full shadow-md 
                                        ${j(s.type)}`,children:s.type}),e.jsx("span",{className:`text-xs w-fit px-2 py-1 rounded-md font-semibold 
                                        ${y(s.status??"pending")}`,children:s.status??"pending"}),e.jsx("p",{className:"text-gray-700 text-sm sm:text-base mt-2",children:s.message}),e.jsxs("div",{className:"border-t pt-3 text-xs sm:text-sm text-gray-500",children:["Submitted by: ",e.jsx("b",{children:s.resident?.name??"You"}),e.jsx("p",{className:"text-gray-400 mt-1",children:new Date(s.created_at).toLocaleString()})]})]},s.id))})]})]}),p&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-md p-6 rounded-xl shadow-xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Feedback"}),e.jsxs("form",{onSubmit:N,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"font-semibold",children:"Category"}),e.jsxs("select",{value:t.type,onChange:s=>m("type",s.target.value),className:"w-full border rounded-lg p-3 bg-gray-50",children:[e.jsx("option",{value:"",children:"Select category"}),e.jsx("option",{value:"feedback",children:"Feedback"}),e.jsx("option",{value:"suggestion",children:"Suggestion"}),e.jsx("option",{value:"complaint",children:"Complaint"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"font-semibold",children:"Message"}),e.jsx("textarea",{rows:4,value:t.message,onChange:s=>m("message",s.target.value),className:"w-full border rounded-lg p-3 bg-gray-50",placeholder:"Write your message..."})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-300 rounded-lg",onClick:()=>o(!1),children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg",disabled:f,children:"Submit"})]})]})]})}),x.show&&e.jsx("div",{className:"fixed right-4 bottom-4 z-50",children:e.jsx("div",{className:"bg-white shadow-lg rounded-lg px-4 py-3 border",children:x.msg})})]})}export{G as default};
