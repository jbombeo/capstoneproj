import{u as I,r as c,d as b,j as e,H as R,L as U}from"./app-Dp8eBqIU.js";import $ from"./layout-DMiLkpC4.js";import{c as z}from"./createLucideIcon-BgI95zP9.js";import{P as H}from"./plus-bBp-iSpQ.js";import{S as q}from"./square-pen-hGvZlx6J.js";import{T as K}from"./trash-2-IZtAv2Rk.js";import{X as O}from"./x-CosRwlaN.js";import"./app-BLU9PWWC.js";import"./menu-B9O67PPD.js";import"./chevron-down-BkXCBmR0.js";import"./log-out-BJ7NbZjK.js";import"./users-C4xSFfJR.js";import"./shield-DaNri6ch.js";import"./calendar-Cu_eH_gM.js";import"./megaphone-BvZ3tSzw.js";import"./graduation-cap-UwHRYR2I.js";import"./file-text-CLxDmEOh.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],G=z("CircleCheck",X);function xe(){const{projects:l,flash:a}=I().props,i=Array.isArray(l)?l:Array.isArray(l?.data)?l.data:[],[d,n]=c.useState(!1),[x,s]=c.useState(!1),[r,o]=c.useState(null),[v,u]=c.useState(!1);c.useEffect(()=>{a?.success&&(u(!0),setTimeout(()=>u(!1),2500))},[a?.success]);const{data:y,setData:w,post:C,processing:h,errors:P,reset:S}=b({title:"",description:"",status:"planned",budget:"",start_date:"",end_date:"",image:null}),[_,p]=c.useState(null),k=t=>{t.preventDefault(),C("/sk/projects",{forceFormData:!0,onSuccess:()=>{S(),p(null),n(!1)}})},{data:E,setData:g,post:D,processing:j,reset:L}=b({_method:"put",title:"",description:"",status:"planned",budget:"",start_date:"",end_date:"",image:null}),[M,m]=c.useState(null),A=t=>{o(t),m(null),g({_method:"put",title:t.title,description:t.description||"",status:t.status,budget:t.budget?.toString()||"",start_date:t.start_date||"",end_date:t.end_date||"",image:null}),s(!0)},F=t=>{t.preventDefault(),r&&D(`/sk/projects/${r.id}`,{forceFormData:!0,onSuccess:()=>{L(),m(null),s(!1)}})},T=t=>t==="ongoing"?"bg-green-100 text-green-700":t==="completed"?"bg-blue-100 text-blue-700":t==="cancelled"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700";return e.jsxs($,{children:[e.jsx(R,{title:"Programs & Projects"}),v&&a?.success&&e.jsxs("div",{className:"fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 animate-fade-in",children:[e.jsx(G,{className:"w-5 h-5"}),e.jsx("span",{children:a.success})]}),e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 rounded-xl",children:[e.jsxs("div",{className:"p-6 border-b bg-gray-50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Programs & Projects"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage youth projects"})]}),e.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 text-white font-semibold shadow hover:bg-blue-700",children:[e.jsx(H,{className:"w-5 h-5"}),"Create Project"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase",children:"Project"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase",children:"Budget"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"py-6 text-center text-gray-500 text-sm",children:"No projects yet."})}):i.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 rounded-lg bg-gray-100 overflow-hidden shadow",children:t.image_url?e.jsx("img",{src:t.image_url,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center text-xs text-gray-400 h-full",children:"No Image"})}),e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-gray-800",children:t.title})})]}),e.jsxs("td",{className:"px-6 py-4 font-semibold text-gray-900",children:["₱",Number(t.budget).toLocaleString()]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${T(t.status)}`,children:t.status.toUpperCase()})}),e.jsxs("td",{className:"px-6 py-4 flex gap-3",children:[e.jsxs("button",{onClick:()=>A(t),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(q,{className:"w-4 h-4"})," Edit"]}),e.jsxs(U,{as:"button",method:"delete",href:`/sk/projects/${t.id}`,className:"text-red-600 hover:text-red-800 flex items-center gap-1",onClick:B=>{confirm("Delete this project?")||B.preventDefault()},children:[e.jsx(K,{className:"w-4 h-4"})," Delete"]})]})]},t.id))})]})})]}),d&&e.jsxs(N,{title:"Create Project",onClose:()=>n(!1),children:[e.jsx(f,{data:y,setData:w,errors:P,preview:_,setPreview:p}),e.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4 mt-6",children:[e.jsx("button",{onClick:()=>n(!1),className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h,className:"btn-primary",onClick:k,children:h?"Saving...":"Create"})]})]}),x&&r&&e.jsxs(N,{title:"Edit Project",onClose:()=>s(!1),children:[e.jsx(f,{data:E,setData:g,preview:M,setPreview:m,errors:{},existingImage:r.image_url}),e.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4 mt-6",children:[e.jsx("button",{onClick:()=>s(!1),className:"btn-secondary",children:"Cancel"}),e.jsx("button",{disabled:j,className:"btn-primary",onClick:F,children:j?"Saving...":"Update"})]})]})]})}function f({data:l,setData:a,errors:i,preview:d,setPreview:n,existingImage:x}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Title"}),e.jsx("input",{type:"text",className:"input",value:l.title,onChange:s=>a("title",s.target.value)}),i.title&&e.jsx("p",{className:"text-red-600 text-xs",children:i.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Description"}),e.jsx("textarea",{className:"input",rows:3,value:l.description,onChange:s=>a("description",s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Status"}),e.jsxs("select",{className:"input",value:l.status,onChange:s=>a("status",s.target.value),children:[e.jsx("option",{value:"planned",children:"Planned"}),e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Budget (₱)"}),e.jsx("input",{type:"number",className:"input",value:l.budget,onChange:s=>a("budget",s.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Start Date"}),e.jsx("input",{type:"date",className:"input",value:l.start_date,onChange:s=>a("start_date",s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"End Date"}),e.jsx("input",{type:"date",className:"input",value:l.end_date,onChange:s=>a("end_date",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Project Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{const r=s.target.files?.[0]??null;if(a("image",r),r){const o=new FileReader;o.onload=()=>n(o.result),o.readAsDataURL(r)}else n(null)}}),d&&e.jsx("img",{src:d,className:"mt-3 rounded-lg shadow max-h-48 object-cover"}),!d&&x&&e.jsx("img",{src:x,className:"mt-3 rounded-lg shadow max-h-48 object-cover"})]})]})}function N({title:l,onClose:a,children:i}){return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 overflow-auto",children:e.jsxs("div",{className:"bg-white max-w-lg w-full p-6 rounded-xl shadow-2xl m-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:l}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700",children:e.jsx(O,{className:"w-5 h-5"})})]}),i]})})}export{xe as default};
