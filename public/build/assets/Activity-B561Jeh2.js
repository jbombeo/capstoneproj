import{u as O,r as m,j as e,H as _,a as y}from"./app-BYDD7jqK.js";import{A as z}from"./app-layout-DwJpk70a.js";import{I as g}from"./input-iCoYWyDm.js";import{B as o}from"./button-Dr-gN8dc.js";import{C as T,a as H}from"./card-JB1H8R4P.js";import{D as C,a as $,b as D,c as E,d as F,e as S}from"./dialog-A7zjs0bz.js";import{L as u}from"./label-CHedX6Vx.js";import{F as R,z as x}from"./index-BhTkidEM.js";import{I as j}from"./input-error-BHkiEYaz.js";import{c as q}from"./createLucideIcon-DdLpzc9k.js";import{T as B}from"./trash-D2ln22GW.js";/* empty css            */import"./app-sidebar-header-p_ZutQgq.js";import"./index-B2jg6ky-.js";import"./index-CoyH5QwD.js";import"./index-WOlHJoPy.js";import"./index-DwhOcVGB.js";import"./log-out-Be8tPfcd.js";import"./x-JC7lT9T1.js";import"./index-fql2wrXq.js";import"./settings-D0VBnQjg.js";import"./file-text-BVrqHHw0.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],G=q("SquarePen",M);function xe({activities:n}){const{errors:d}=O().props,[v,p]=m.useState(!1),[l,s]=m.useState(!1),[i,N]=m.useState(null),[a,h]=m.useState({dateofactivity:"",activity:"",description:"",photos:[]}),[A,f]=m.useState([]),w=()=>{h({dateofactivity:"",activity:"",description:"",photos:[]}),f([])},b=t=>{if(!t.target.files)return;const c=Array.from(t.target.files);h(r=>({...r,photos:c})),f(c.map(r=>URL.createObjectURL(r)))},U=()=>{const t=new FormData;t.append("dateofactivity",a.dateofactivity),t.append("activity",a.activity),t.append("description",a.description),a.photos.forEach((c,r)=>t.append(`photos[${r}]`,c)),y.post("/activities",t,{forceFormData:!0,onSuccess:()=>{w(),p(!1),x.success("Activity added successfully!")},onError:()=>x.error("Failed to add activity")})},P=t=>{N(t),h({dateofactivity:t.dateofactivity,activity:t.activity,description:t.description,photos:[]}),f([]),s(!0)},I=()=>{if(!i)return;const t=new FormData;t.append("dateofactivity",a.dateofactivity),t.append("activity",a.activity),t.append("description",a.description),t.append("_method","PUT"),a.photos.forEach((c,r)=>t.append(`photos[${r}]`,c)),y.post(`/activities/${i.id}`,t,{forceFormData:!0,onSuccess:()=>{w(),N(null),s(!1),x.success("Activity updated successfully!")},onError:()=>x.error("Failed to update activity")})},L=t=>{confirm("Are you sure you want to delete this activity?")&&y.delete(`/activities/${t}`,{onSuccess:()=>x.success("Activity deleted successfully!")})};return e.jsxs(z,{breadcrumbs:[{title:"Activities",href:"#"}],children:[e.jsx(_,{title:"Activities"}),e.jsx(R,{}),e.jsxs("div",{className:"flex justify-between items-center mb-8 bg-green-600 text-white shadow p-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Activities"}),e.jsxs(C,{open:v,onOpenChange:p,children:[e.jsx($,{asChild:!0,children:e.jsx(o,{className:"bg-blue-600 hover:bg-blue-700",children:"+ Add Activity"})}),e.jsxs(D,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs(E,{children:[e.jsx(F,{children:"Add Activity"}),e.jsx(S,{children:"Fill in the details below to create a new activity."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{formData:a,setFormData:h,previewUrls:A,handleFileChange:b,errors:d}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(o,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(o,{onClick:U,children:"Save"})]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.length>0?n.map(t=>e.jsx(T,{className:"shadow rounded-xl",children:e.jsxs(H,{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:t.activity}),e.jsx("p",{className:"text-sm text-gray-600",children:t.dateofactivity}),e.jsx("p",{className:"whitespace-pre-line text-gray-700",children:t.description})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:t.activity_photos.length>0?t.activity_photos.map(c=>e.jsx("img",{src:c.url,alt:"Activity",className:"w-24 h-24 object-cover rounded",crossOrigin:"use-credentials"},c.id)):e.jsx("div",{className:"w-24 h-24 bg-gray-200 flex items-center justify-center rounded",children:e.jsx("span",{className:"text-gray-500 text-sm",children:"No Image"})})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>P(t),children:[e.jsx(G,{className:"w-4 h-4 mr-1"})," Edit"]}),e.jsxs(o,{size:"sm",variant:"destructive",onClick:()=>L(t.id),children:[e.jsx(B,{className:"w-4 h-4 mr-1"})," Delete"]})]})]})},t.id)):e.jsx("p",{className:"text-gray-500",children:"No activities found"})}),e.jsx(C,{open:l,onOpenChange:s,children:e.jsxs(D,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs(E,{children:[e.jsx(F,{children:"Edit Activity"}),e.jsx(S,{children:"Update the details of your activity below."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{formData:a,setFormData:h,previewUrls:A,handleFileChange:b,errors:d}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(o,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(o,{onClick:I,children:"Update"})]})]})]})})]})}function k({formData:n,setFormData:d,previewUrls:v,handleFileChange:p,errors:l}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(u,{children:"Date of Activity"}),e.jsx(g,{type:"date",value:n.dateofactivity,onChange:s=>d(i=>({...i,dateofactivity:s.target.value}))}),e.jsx(j,{message:l.dateofactivity})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Activity"}),e.jsx(g,{value:n.activity,onChange:s=>d(i=>({...i,activity:s.target.value}))}),e.jsx(j,{message:l.activity})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Description"}),e.jsx("textarea",{className:"w-full border rounded p-2 focus:ring",rows:4,value:n.description,onChange:s=>d(i=>({...i,description:s.target.value}))}),e.jsx(j,{message:l.description})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Upload Photos"}),e.jsx(g,{type:"file",multiple:!0,onChange:p}),e.jsx(j,{message:l.photos}),v.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-3 mt-2",children:v.map((s,i)=>e.jsx("img",{src:s,className:"w-24 h-24 object-cover rounded"},i))})]})]})}export{xe as default};
