import{u as j,r as l,j as e,H as g}from"./app-_wj1wiEc.js";import{A as u}from"./app-layout-BSN3Q_UY.js";import{I as y}from"./input-CaSbsQoB.js";import{C as b,a as N}from"./card-DUg4c0sP.js";import{D as w,a as v,b as F,c as O}from"./dialog-BHDE3h_S.js";import{z as i,F as H}from"./index-9aUBe4GY.js";import{U as C}from"./users-CzPkGoWA.js";import"./app-DgE45SX0.js";import"./utils-csTuJWuA.js";import"./clsx-B-dksMZM.js";import"./button-HZSfloRH.js";import"./index-DVkLe2dy.js";import"./index-DlLLoGOC.js";import"./index-Dl6FYVux.js";import"./index-CObx42Nt.js";import"./x-cF_pgnf8.js";import"./createLucideIcon-Dk2zpREm.js";import"./index-BRMnPjnz.js";import"./chevron-down-Ciywszaj.js";import"./index-CRvzyME4.js";import"./index-CDy59-5j.js";import"./index-CMWG4mbA.js";import"./log-out-CytyyNiJ.js";import"./map-pin-K0z2MPXY.js";import"./file-text-ZNTU_lRQ.js";import"./clipboard-list-iHk9S1ba.js";import"./settings-B87Gxw1-.js";function se(){const{households:m,errors:r,flash:a}=j().props,[d,x]=l.useState(""),[p,c]=l.useState(!1),[t,h]=l.useState(null);l.useEffect(()=>{r&&Object.keys(r).length>0&&Object.values(r).forEach(s=>i.error(s)),a?.success&&i.success(a.success),a?.error&&i.error(a.error)},[r,a]);const n=m.filter(s=>`${s.headOfFamily?.first_name} ${s.headOfFamily?.last_name}`.toLowerCase().includes(d.toLowerCase())),f=s=>{h(s),c(!0)},o=s=>s?`/storage/${s}`:"/images/default-avatar.png";return e.jsxs(u,{breadcrumbs:[{title:"Households",href:"#"}],children:[e.jsx(g,{title:"Households"}),e.jsx(H,{position:"top-right"}),e.jsxs("div",{className:"mb-10 bg-gradient-to-r from-green-700 to-green-500 text-white p-8 rounded-xl shadow-xl",children:[e.jsx("h1",{className:"text-4xl font-extrabold",children:"Household Registry"}),e.jsx("p",{className:"opacity-90 text-sm",children:"Official Barangay Household Information Records"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6 bg-white px-5 py-4 rounded-xl shadow border",children:e.jsx(y,{placeholder:"Search by head of family...",value:d,onChange:s=>x(s.target.value),className:"max-w-md"})}),e.jsx(b,{className:"shadow-xl rounded-2xl border",children:e.jsx(N,{className:"p-0",children:e.jsxs("table",{className:"w-full text-sm text-left table-fixed",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 w-32",children:"Household No"}),e.jsx("th",{className:"px-6 py-3 w-64",children:"Head of Family"}),e.jsx("th",{className:"px-6 py-3 w-32 text-center",children:"Members"}),e.jsx("th",{className:"px-6 py-3 w-24 text-center",children:"Zone"})]})}),e.jsx("tbody",{children:n.length>0?n.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-6 py-4 font-semibold text-green-800",children:e.jsx("span",{className:"bg-green-100 px-3 py-1 rounded-lg",children:s.household_no})}),e.jsx("td",{className:"px-6 py-4 font-semibold text-gray-900",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:o(s.headOfFamily.image),className:"h-10 w-10 rounded-full object-cover border"}),e.jsxs("div",{children:[s.headOfFamily.last_name,","," ",s.headOfFamily.first_name]})]})}),e.jsx("td",{onClick:()=>f(s),className:"px-6 py-4 text-blue-700 font-bold cursor-pointer",children:e.jsxs("div",{className:"flex justify-center items-center gap-2 hover:underline",children:[e.jsx(C,{className:"h-5 w-5 text-blue-700"}),s.household_member]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"bg-gray-200 px-3 py-1 rounded-lg text-gray-700 font-medium",children:s.zone?.zone??s.headOfFamily?.zone?.zone??""})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"No households found"})})})]})})})]}),e.jsx(w,{open:p,onOpenChange:c,children:e.jsxs(v,{className:"sm:max-w-xl",children:[e.jsx(F,{children:e.jsx(O,{className:"text-xl font-bold",children:"Family Composition"})}),t&&e.jsxs("div",{className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:o(t.headOfFamily.image),className:"w-24 h-24 rounded-full border object-cover shadow"}),e.jsxs("p",{className:"text-lg font-bold mt-2",children:[t.headOfFamily.last_name,","," ",t.headOfFamily.first_name]}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Head of Family"})]}),e.jsx("div",{className:"w-full border-t my-4"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.members.filter(s=>s.relation!=="Head").map(s=>e.jsxs("div",{className:"p-4 border rounded-xl bg-gray-50 shadow-sm flex flex-col items-center",children:[e.jsx("img",{src:o(s.image),className:"w-20 h-20 rounded-full object-cover border shadow"}),e.jsxs("p",{className:"mt-3 text-center font-bold text-gray-900",children:[s.last_name,", ",s.first_name]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.relation}),e.jsx("p",{className:"text-xs text-gray-500",children:s.gender}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.age," yrs old"]})]},s.id))})]})]})})]})}export{se as default};
