import{u as $,r as d,d as I,j as e,H as P,b,L as C}from"./app-_wj1wiEc.js";import F from"./layout-Ddv5vJTo.js";import{C as z}from"./circle-check-big-4R1TVs5z.js";import{S as B,F as H}from"./search-XJ8tb-32.js";import{P as K}from"./plus-Bd0Kclq8.js";import{c as R}from"./createLucideIcon-Dk2zpREm.js";import{U as T}from"./users-CzPkGoWA.js";import{S as q}from"./square-pen-CNBI_mwx.js";import{T as O}from"./trash-2-BM4WDXKp.js";import{X as A}from"./x-cF_pgnf8.js";import"./app-DgE45SX0.js";import"./menu-DWAPWAZ9.js";import"./chevron-down-Ciywszaj.js";import"./log-out-CytyyNiJ.js";import"./shield-CKl6ORK5.js";import"./calendar-BaDhdvZj.js";import"./megaphone-DUMjV7Mc.js";import"./graduation-cap-CmdrbnQU.js";import"./file-text-ZNTU_lRQ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],X=R("Image",V);function pe(){const{scholarships:r,filters:n={}}=$().props,[a,l]=d.useState(!1),[i,c]=d.useState(!1),[h,p]=d.useState(!1),[o,t]=d.useState(null),[y,m]=d.useState(null),[u,f]=d.useState(null),{data:N,setData:g,post:D,put:M,processing:w,reset:j}=I({title:"",description:"",budget:"",open_date:"",close_date:"",image:null}),v=r?.data??[];d.useEffect(()=>{if(u){const s=setTimeout(()=>f(null),3500);return()=>clearTimeout(s)}},[u]);const S=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"—",L=s=>{s.preventDefault(),D("/sk/scholarships",{onSuccess:()=>{j(),m(null),l(!1),b.reload({only:["scholarships"]}),f("Scholarship added successfully!")}})},E=s=>{s.preventDefault(),o&&M(`/sk/scholarships/${o.id}`,{onSuccess:()=>{j(),m(null),c(!1),b.reload({only:["scholarships"]}),f("Scholarship updated successfully!")}})},_=s=>{if(g("image",s),s){const x=new FileReader;x.onload=U=>m(U.target?.result),x.readAsDataURL(s)}else m(null)};return e.jsxs(F,{children:[e.jsx(P,{title:"Scholarship Programs"}),u&&e.jsx("div",{className:"fixed top-5 right-5 z-50",children:e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-green-600 to-green-700 text-white px-4 py-2 rounded-xl shadow-lg",children:[e.jsx(z,{className:"w-5 h-5"}),e.jsx("div",{className:"text-sm font-medium",children:u})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-5 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scholarship Programs"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage SK scholarship grants and educational assistance"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative w-full md:w-72",children:[e.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search scholarships...",defaultValue:n.search,onKeyDown:s=>s.key==="Enter"&&b.get("/sk/scholarships",{search:s.currentTarget.value}),className:"w-full pl-10 pr-4 py-2.5 border rounded-lg shadow-sm focus:ring-2 focus:ring-purple-300"})]}),e.jsxs("button",{className:"px-4 py-2 rounded-lg border border-gray-300 bg-white hover:bg-gray-50 flex items-center gap-2 text-sm font-medium",children:[e.jsx(H,{className:"w-4 h-4"})," Filter"]}),e.jsxs("button",{onClick:()=>{j(),m(null),l(!0)},className:"px-4 py-2 rounded-lg text-sm font-semibold flex items-center gap-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-md",children:[e.jsx(K,{className:"w-4 h-4"})," Add Scholarship"]})]})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"overflow-x-auto w-full max-w-full",children:e.jsxs("table",{className:"w-full table-auto border-collapse hidden md:table",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:["Scholarship","Budget","Applicants","Open Date","Close Date","Actions"].map(s=>e.jsx("th",{className:"text-xs font-semibold text-gray-700 uppercase px-14 py-3 text-left",children:s},s))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:v.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"No scholarships available."})}):v.map(s=>e.jsxs("tr",{className:"hover:bg-purple-50 transition",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-100 overflow-hidden shadow-sm",children:s.image_path?e.jsx("img",{src:`/storage/${s.image_path}`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(X,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.title}),e.jsx("div",{className:"text-xs text-gray-500",children:s.description||"—"})]})]})}),e.jsxs("td",{className:"px-6 py-4 text-right font-semibold",children:["₱",Number(s.budget??0).toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 text-center cursor-pointer",onClick:()=>{t(s),p(!0)},children:e.jsxs("span",{className:"inline-flex items-center gap-2 text-purple-700 font-semibold",children:[e.jsx(T,{className:"w-4 h-4 text-purple-600"}),s.applications_count??0]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:S(s.open_date)}),e.jsx("td",{className:"px-6 py-4 text-center",children:S(s.close_date)}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsxs("button",{onClick:()=>{t(s),g({title:s.title||"",description:s.description||"",budget:s.budget?.toString()||"",open_date:s.open_date?.split("T")[0]||"",close_date:s.close_date?.split("T")[0]||"",image:null}),m(s.image_path?`/storage/${s.image_path}`:null),c(!0)},className:"text-gray-700 hover:text-gray-900 flex items-center gap-1",children:[e.jsx(q,{className:"w-4 h-4"})," Edit"]}),e.jsxs(C,{as:"button",method:"delete",href:`/sk/scholarships/${s.id}`,className:"text-red-600 hover:text-red-800 flex items-center gap-1",onClick:x=>!confirm("Delete this scholarship?")&&x.preventDefault(),children:[e.jsx(O,{className:"w-4 h-4"})," Delete"]})]})})]},s.id))})]})})})}),e.jsxs("div",{className:"px-6 pb-6 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Total: ",r?.total??0]}),e.jsx("div",{className:"flex items-center gap-2",children:r?.links?.map((s,x)=>e.jsx(C,{href:s.url??"#",preserveScroll:!0,preserveState:!0,className:`px-3 py-1 rounded-md text-sm ${s.active?"bg-purple-600 text-white":"bg-white border border-gray-200"}`,children:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},x))})]})]})}),a&&e.jsx(k,{title:"Add New Scholarship",onClose:()=>l(!1),onSubmit:L,data:N,setData:g,processing:w,imagePreview:y,handleImageChange:_,submitText:"Save"}),i&&o&&e.jsx(k,{title:"Edit Scholarship",onClose:()=>c(!1),onSubmit:E,data:N,setData:g,processing:w,imagePreview:y,handleImageChange:_,submitText:"Update"}),h&&o&&e.jsx(G,{selected:o,onClose:()=>p(!1)})]})}function k({title:r,onClose:n,onSubmit:a,data:l,setData:i,processing:c,imagePreview:h,handleImageChange:p,submitText:o}){return e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-4",children:e.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-xl border border-gray-200 p-6 relative",children:[e.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:e.jsx(A,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:r}),e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Title"}),e.jsx("input",{type:"text",value:l.title,onChange:t=>i("title",t.target.value),className:"w-full mt-1 border-gray-300 rounded-lg shadow-sm focus:ring-purple-300",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Description"}),e.jsx("textarea",{value:l.description,onChange:t=>i("description",t.target.value),className:"w-full mt-1 border-gray-300 rounded-lg shadow-sm",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Budget"}),e.jsx("input",{type:"number",min:"0",value:l.budget,onChange:t=>i("budget",t.target.value),className:"w-full mt-1 border-gray-300 rounded-lg shadow-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Open Date"}),e.jsx("input",{type:"date",value:l.open_date,onChange:t=>i("open_date",t.target.value),className:"w-full mt-1 border-gray-300 rounded-lg shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Close Date"}),e.jsx("input",{type:"date",value:l.close_date,onChange:t=>i("close_date",t.target.value),className:"w-full mt-1 border-gray-300 rounded-lg shadow-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>p(t.target.files?.[0]??null),className:"mt-1"}),h&&e.jsx("img",{src:h,className:"w-full h-48 object-cover rounded-xl border shadow-sm mt-3"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-5 py-2 rounded-lg text-white bg-gradient-to-r from-purple-600 to-indigo-600 shadow-md",children:c?"Saving...":o})]})]})]})})}function G({selected:r,onClose:n}){return e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg p-6 relative border border-gray-200",children:[e.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:e.jsx(A,{className:"w-5 h-5"})}),e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-1 flex items-center gap-2",children:[e.jsx(T,{className:"w-6 h-6 text-purple-600"})," Applicants"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Showing all applicants for ",e.jsx("span",{className:"font-semibold",children:r.title})]}),r.applications?.length?e.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:r.applications.map(a=>{const l=`${a.youth?.first_name??""} ${a.youth?.last_name??""}`.trim()||"Unknown Applicant",i=a.status==="approved"?"bg-green-100 text-green-700 border-green-300":a.status==="rejected"?"bg-red-100 text-red-700 border-red-300":"bg-yellow-100 text-yellow-700 border-yellow-300";return e.jsx("div",{className:"p-4 bg-white border rounded-xl shadow-sm hover:shadow-md transition",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:l}),a.youth?.email&&e.jsx("p",{className:"text-sm text-gray-600",children:a.youth.email})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${i}`,children:a.status.toUpperCase()})]})},a.id)})}):e.jsx("div",{className:"text-center py-10 text-gray-500",children:"No applicants yet."})]})})}export{pe as default};
